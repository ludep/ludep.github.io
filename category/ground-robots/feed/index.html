<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Ground robots &#8211; LUDEP</title>
	<atom:link href="https://www.ludep.com/category/ground-robots/feed/" rel="self" type="application/rss+xml" />
	<link>https://www.ludep.com</link>
	<description>Leading Units &#38; Drone Enabled Probing</description>
	<lastBuildDate>
	Wed, 31 Aug 2011 17:43:20 +0000	</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	
	<item>
		<title>The flock behavior: from scratch till now</title>
		<link>https://www.ludep.com/the-flock-behavior-from-scratch-till-now/</link>
				<pubDate>Tue, 23 Aug 2011 10:45:59 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Ideas]]></category>
		<category><![CDATA[Issues]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Refining the project]]></category>
		<category><![CDATA[Testing]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=935</guid>
				<description><![CDATA[Introduction The  flock behavior is one of the last things we had to deal with because of all the amount of work before that, but it is one of the most important feature of the project and we spent a lot of time implementing, coding and testing it in order to make it close to [&#8230;] <a href="https://www.ludep.com/the-flock-behavior-from-scratch-till-now/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<h2 style="text-align: justify;">Introduction</h2>
<p style="text-align: justify;">The  flock behavior is one of the last things we had to deal with because of all the amount of work before that, but it is one of the most important feature of the project and we spent a lot of time implementing, coding and testing it in order to make it close to our expectations. This article will be the most important concerning the flock behavior: it might talk about points that have already been mentioned before but that is only in order to give more details and further explanations.</p>
<p style="text-align: justify;">Our supervisor let us know that a former student already worked on mobile robots moving in formation<sup><a href="https://www.ludep.com/the-flock-behavior-from-scratch-till-now/#footnote_0_935" id="identifier_0_935" class="footnote-link footnote-identifier-link" title="PhD dissertation by Jakob Fredslund; Simplicity Applied in Projects Involving Embodied, Autonomous Robots; pp67-124">1</a></sup>. It was really interesting to see how a same project can be approached in different ways: instead of giving most of the control to the robots in the flock, we decided to put the leader in charge for almost everything. This decision made the programming and implementation different but we came out with a very autonomous system at the end of the project.</p>
<p style="text-align: justify;">This article will be structured in the same way the flock behavior was designed: with progressive layers. We integrated one behavior at a time, tested it over and over and passed to the next one. In every point here, we will ask what we wanted to do, why we wanted to do it, what was expected and what were the results.</p>
<p>&nbsp;</p>
<h2 style="text-align: justify;">The different steps of the flock</h2>
<h3 style="text-align: justify;">The basic flock</h3>
<h4 style="text-align: justify;">Expectations</h4>
<p style="text-align: justify;">This was the really first approach we had. Basically, the image analysis would return two coordinates: one for the leader and the other for the robot following. The robot following the leader was only supposed to go &#8220;down&#8221; the leader (we take the coordinates of the leader and subtract a value called &#8220;desiredSpace&#8221; that will define the space between each neighbor unit in the formation). With such an implementation, we were expecting the robot following to act roughly like the leader with a little delay that we were ready to tackle if it was too important.</p>
<h4 style="text-align: justify;">Results</h4>
<p style="text-align: justify;">We posted videos in the <a href="http://www.ludep.com/merging-our-work-together-the-beginnings-of-worthy-and-notable-results/" target="_blank">previous article</a> (under &#8220;Very first working test&#8221;) and we could see that the behavior was working but wasn&#8217;t fluid at all. The robot was properly changing its position according to the leader movements, we just needed to tune our parameters in order to make it more reactive, more suitable.</p>
<h4 style="text-align: justify;">Improvements</h4>
<p style="text-align: justify;">In order to understand how we improved the fluidity, we have to tell you more about how the flock is being monitored. The code in itself is really long, and it might be too much to expose it straight here; instead, a basic representation should do the trick and expose you the inner mechanics of the algorithm.</p>
<table class="aligncenter" width="485">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/cycleFlock.png"><img class="aligncenter size-full wp-image-946" title="cycleFlock" src="http://www.ludep.com/wp-content/uploads/2011/08/cycleFlock.png" alt="" width="485" height="335" srcset="https://www.ludep.com/wp-content/uploads/2011/08/cycleFlock.png 809w, https://www.ludep.com/wp-content/uploads/2011/08/cycleFlock-300x207.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/cycleFlock-100x69.png 100w" sizes="(max-width: 485px) 100vw, 485px" /></a><a href="http://www.ludep.com/wp-content/uploads/2011/08/cycleFlock.png"><br />
</a></td>
</tr>
<tr>
<th style="text-align: justify;"><strong>[Figure 1]</strong> Cycle of the flock handling process</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">As you might have pictured it in your mind, the big loop is indeed an infinite loop in our program. Every time one cycle has been done, the system makes a pause of a certain time (that we can settle) in order not to send too much commands to the bricks. Indeed, if hadn&#8217;t do that, the program would still work, but we would have a lot of useless information sent to the brick that wouldn&#8217;t even be treated because they would be erased by the next commands (if the robot is executing a command and receives a new one, it will abort the previous one and execute the most recent).</p>
<p style="text-align: justify;">All of those explanation to make you understand our system and to show you where we tuned our parameter in order to fix our delay problem. First, we change the pause in the loop from 1 second to 0,25 second (which made us gain in response time). Secondly, we change a layer in the &#8220;Assign and Send Movement Command&#8221;. Actually this minor change was operated on the brick in itself: the robot is asked to move with a speed inversely proportional to the distance it is asked to move. Nevertheless, an overshot problem was still remaining and we had to tune another parameter to fix it: every time a robot is on its desired location, we define a threshold, a circle of tolerance acknowledging the robot in good position or not. We changed it from 10cm to 30cm and made it work.</p>
<p style="text-align: justify;">At this point, tuning few parameters of our system and adding a proportional correction transformed our jerky system into a reliable and fluid one.</p>
<p>&nbsp;</p>
<h3 style="text-align: justify;">A dynamic and oriented flock</h3>
<h4 style="text-align: justify;">Expectations</h4>
<p style="text-align: justify;">At this point, one robot was properly following the other one. But the &#8220;Compute desired positions&#8221; layer was quite simple as we mentioned before: it only translated the position of the leader down and gave it to the other robot. We wanted to have a random number of robots in the flock and we wanted the flock to adapt itself in real-time according to this number. Besides, we wanted to add the &#8220;orientation&#8221; feature. Instead of staying below the leader, we wanted the flock to stay behind (that is to say in the opposite direction that the leader is looking at). Why such a choice you might say. Indeed, if our project was designed to work only in straight lines, we wouldn&#8217;t mind but we really wanted to implement something that would be coherent for direction changes. This feature would give the ability to the flock to follow the leader instead of simply staying behind, naively copying the leader&#8217;s gesture.</p>
<h4 style="text-align: justify;">How we implemented it</h4>
<p style="text-align: justify;">The algorithm is quite detailed once more; instead of explaining the code line by line or so, we split the functioning in its three biggest parts in order to show you the mechanics.</p>
<table>
<tbody>
<tr>
<td width="300"><a href="http://www.ludep.com/wp-content/uploads/2011/08/computePositions1.png"><img class="aligncenter size-medium wp-image-958" title="computePositions1" src="http://www.ludep.com/wp-content/uploads/2011/08/computePositions1-300x178.png" alt="" width="300" height="178" srcset="https://www.ludep.com/wp-content/uploads/2011/08/computePositions1-300x178.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/computePositions1-100x59.png 100w, https://www.ludep.com/wp-content/uploads/2011/08/computePositions1.png 784w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td width="300"><a href="http://www.ludep.com/wp-content/uploads/2011/08/computePositions2.png"><img class="aligncenter size-medium wp-image-960" title="computePositions2" src="http://www.ludep.com/wp-content/uploads/2011/08/computePositions2-300x178.png" alt="" width="300" height="178" srcset="https://www.ludep.com/wp-content/uploads/2011/08/computePositions2-300x178.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/computePositions2-100x59.png 100w, https://www.ludep.com/wp-content/uploads/2011/08/computePositions2.png 784w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td width="300"><a href="http://www.ludep.com/wp-content/uploads/2011/08/computePositions3.png"><img class="aligncenter size-medium wp-image-961" title="computePositions3" src="http://www.ludep.com/wp-content/uploads/2011/08/computePositions3-300x178.png" alt="" width="300" height="178" srcset="https://www.ludep.com/wp-content/uploads/2011/08/computePositions3-300x178.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/computePositions3-100x59.png 100w, https://www.ludep.com/wp-content/uploads/2011/08/computePositions3.png 784w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
</tr>
<tr>
<th style="text-align: justify;"><strong>[Figure 2]</strong> The algorithm detects the number of units detected (4 in our case)</th>
<th style="text-align: justify;"><strong>[Figure 3]</strong> It draws a polygon of n (number of units detected) sides with the leader being at the center&#8230;</th>
<th style="text-align: justify;"><strong>[Figure 4]</strong>&#8230;and then translates the polygon such as the first summit would be the leader. All the other summits represent the positions for the flock</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">After the algorithm has run, we have a set of positions of the robots and a set of positions for the desired positions. The next challenge was to find the best position to go for each robot and make it optimal for the whole flock. For this matter, several solution were found:</p>
<ul>
<li>look at all the possible solutions and take the best one <strong>~ O(n!) </strong>which is barely acceptable even if we are working with four units at most (we rejected this solution because our algorithm is supposed to work with <em>n</em> robots and who could accept an algorithm with such a complexity&#8230;)</li>
<li>look at the best solution for each individual <strong>~ O(n²)</strong></li>
</ul>
<div>The second solution tends to be really close to the first (and best in term of distance but not in time) one, especially when there are not that many robots. This is why we chose that solution and instead of taking the units in the same order at each iteration, we randomize it every time (this would avoid some blocking problems).</div>
<h4 style="text-align: justify;">Results</h4>
<table class="aligncenter" width="420">
<tbody>
<tr>
<td><object width="420" height="345" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/V3DXk8OqgwM?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="420" height="345" type="application/x-shockwave-flash" src="http://www.youtube.com/v/V3DXk8OqgwM?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
</tr>
<tr>
<th style="text-align: justify;"><strong>[Video 1]</strong> Looking at the flock self-adjusting in real-time</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">We had exactly what we wanted for this feature, we can exactly see how the different polygons shape with the robots coming on the field and this works whatever the direction of the leader. Nevertheless, the robots are not moving on this video because they could intersect each other&#8217;s path and therefore ruin the flock. This is why the next step was crucial: we had to deal with the avoidance. [Video 1]</p>
<h4 style="text-align: justify;">Improvements</h4>
<p style="text-align: justify;">The first version of the algorithm that computed the position for the robots only needed a radius for the circle containing the polygon of the units. Problem being: the more units we had in the flock, the closer they would be. In order to fix that, the radius of this circle had to change according to the number of present units in the flock. Using basic trigonometry, we came out with a formula for this radius that make the distance between neighbor units constant.</p>
<p><a href="http://www.ludep.com/wp-content/uploads/2011/08/formulaCircle.png"><img class="aligncenter size-full wp-image-983" title="formulaCircle" src="http://www.ludep.com/wp-content/uploads/2011/08/formulaCircle.png" alt="" width="377" height="71" srcset="https://www.ludep.com/wp-content/uploads/2011/08/formulaCircle.png 377w, https://www.ludep.com/wp-content/uploads/2011/08/formulaCircle-300x56.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/formulaCircle-100x18.png 100w" sizes="(max-width: 377px) 100vw, 377px" /></a></p>
<p style="text-align: justify;">This arrangement is indeed proper with a small number of robots but the bigger the flock gets, the bigger the polygon will be. This can be annoying, especially if we want to use the less space possible on the floor; we have an unused area proportional to the square of the number of units and the distance between them (2,8m² for 10 units for instance). In order to solve that, we could change the &#8220;Compute desired location&#8221; layer and instead of making one polygon of robots, we could make several polygons inside each other and save this way all the unused space. Here are some ideas we could think of on the Figure 5.</p>
<table class="aligncenter" width="571">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/possibleFormations1.png"><img class="aligncenter size-full wp-image-1085" title="possibleFormations" src="http://www.ludep.com/wp-content/uploads/2011/08/possibleFormations1.png" alt="" width="571" height="286" srcset="https://www.ludep.com/wp-content/uploads/2011/08/possibleFormations1.png 815w, https://www.ludep.com/wp-content/uploads/2011/08/possibleFormations1-300x150.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/possibleFormations1-100x50.png 100w" sizes="(max-width: 571px) 100vw, 571px" /></a></td>
</tr>
<tr>
<th style="text-align: justify;"><strong>[Figure 5]</strong> Template we could use for improved flock position (with numerous robots). On the left template, we multiply the units by two on the outer belt; on the right template, we add one more unit to the outer belt. Those are indeed examples, we don&#8217;t have a precise idea of what is or should be the best one, it is just fuel for thoughts.</th>
</tr>
</tbody>
</table>
<p>We could even think to dispatch the units all around the leader: the leader would be the center of all those nested polygons. It could be a real advantage if we have a lot of units in the flock: they would be all in an optimal layout in order to stay in the FOV. Nevertheless, we would have a lot of problem with the avoidance that we are going to develop in the next section.</p>
<h3 style="text-align: justify;">Implementing the movements of the flock</h3>
<h4 style="text-align: justify;">Expectations</h4>
<p style="text-align: justify;">At this point, we had everything working in theory. We mean in theory because every time a robot is asked to go to a position, it will go where it is ask to go without asking further question. Basically, this section describes how the &#8220;Assign and send movement commands to bricks&#8221; layer [Figure 1] is designed. In order to have a stable system, we had to answer/find a way to solve the following problems:</p>
<ul style="text-align: justify;">
<li>The robots in the flock should not bump into each other;</li>
<li>The robots should try to stay in the FOV of the camera in order to stay alive in the flock (if the robot is not detected for a while, it will be deleted from the flock);</li>
<li>The robots in the flock should do their best in order to avoid the leader when maneuvering;</li>
<li>Give a priority to all those behaviors in order to make everything coherent and working.</li>
</ul>
<h4 style="text-align: justify;">How we implemented it</h4>
<p style="text-align: justify;"><em><strong>How the robots avoid each other</strong></em></p>
<p style="text-align: justify;">As soon as the &#8220;Compute desired location&#8221; layer [Figure 1] has been executed, we have two things: a list of bricks in the flock with their positions and a set of desired positions (and they should be of the exact same length). Randomly, we are taking a robot and we are assigning it to a position. This is the point where the following algorithm is triggered:</p>
<pre>public void giveBrickDirection(Brick b, Point p)
{
	while( distancePositions(b.getPosition(), p) &gt; proximityThreshold )
	{
		if(movementPossible(b, p))
		{
			b.setGoToPostion(p);
			return;
		}
		else
		{
			p.translate((-p.x+b.getPosition().x)/3, (-p.y+b.getPosition().y)/3);
		}
	}
}</pre>
<p style="text-align: justify;">The mechanics are that simple: as long as the distance between the robot and its goal position is longer than the proximity threshold (this is the &#8220;error distance&#8221; we define in order to establish when a robot is close enough to its target), we look if the goal position is within range. If it is reachable, we send the command to the robot in order to send it to the desired position. If not, we reduce the distance of the command by 33%. The recursion is terminal because either the robot will be able to make the movement within few recursions or at one point the distance will get smaller than the threshold and the robot will stand still, waiting for the next command.</p>
<p style="text-align: justify;">The black box in here would be the method <em>movementPossible(Brick b, Point p)</em>. To make it understandable, the method goes through the list of all the brick and check if the movement of the considered brick <em>b</em> will not cross any other brick location or movement. In order to make it even simpler, take a look at the Figure 6.</p>
<table class="aligncenter" width="442">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/noCollision1.png"><img class="aligncenter size-full wp-image-1086" title="noCollision" src="http://www.ludep.com/wp-content/uploads/2011/08/noCollision1.png" alt="" width="442" height="400" srcset="https://www.ludep.com/wp-content/uploads/2011/08/noCollision1.png 736w, https://www.ludep.com/wp-content/uploads/2011/08/noCollision1-300x271.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/noCollision1-100x90.png 100w" sizes="(max-width: 442px) 100vw, 442px" /></a></td>
</tr>
<tr>
<th style="text-align: justify;"><strong>[Figure 6]</strong> How the &#8220;collision area&#8221; is defined. As long as nothing is into or enters the green area, the red robot will be allowed to make its move.</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">If the red brick has to move, we will compare with every other brick (the blue one here for instance) that there is no conflict. If the blue brick is not moving (as in our example), we check if the initial position is not in the  &#8220;no collision area&#8221;; if not, the movement will be allowed. If the blue brick was moving, we would do two more checks: one to test if the blue robot&#8217;s desired location is not in the &#8220;no collision area&#8221; and we&#8217;ll check if the lines are intersecting with basic geometry rules.</p>
<p style="text-align: justify;"><em><strong>How the robots survive (from being excluded from the FOV)</strong></em></p>
<p style="text-align: justify;">This behavior was really simple to approach and implement, here is some code to illustrate it:</p>
<pre>if (  getConsideredBricks().get(i).isOnEdge() )
{
	giveBrickDirection(currentBrick,
			new Point((brickInControl.getPosition().x-brickPosition.x)/2+brickPosition.x,
					(brickInControl.getPosition().y-brickPosition.y)/2+brickPosition.y));
}</pre>
<p style="text-align: justify;">Basically, every brick has an boolean attribute &#8220;isOnEdge&#8221; given by the drone. If the robot is too close to the limit of the FOV, the attribute &#8220;isOnEdge&#8221; switches to <em>true</em> and we just ask the robot to get closer to the leader. With the drone being supposed to stay on top of the leader, the robot getting closer to the edge will therefore get closer to the leader/the center of the FOV.</p>
<p style="text-align: justify;"><em><strong>How the robots avoid the leader</strong></em></p>
<p style="text-align: justify;">This feature works exactly the same way than the previous one. We check if the robot is too close to the leader. If not, the robot might proceed to the normal routine (previously mentioned); if so, the robot has to &#8220;escape&#8221; from the leader. Why should we do complicated when a simple solution works a charm?</p>
<p style="text-align: justify;"><em><strong>How we merge all those behaviors together</strong></em></p>
<p style="text-align: justify;">How to order those behaviors would have an important impact on the global behavior of the system. If we take a closer, we can detect that some commands contradict each other (survival and leader avoidance for instance): this is why we took a long time in order prioritize each behavior according to the way we wanted the system to respond [Figure 7].</p>
<table class="aligncenter" width="390">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/priorityBehaviors.png"><img class="aligncenter size-full wp-image-1076" title="priorityBehaviors" src="http://www.ludep.com/wp-content/uploads/2011/08/priorityBehaviors.png" alt="" width="390" height="279" srcset="https://www.ludep.com/wp-content/uploads/2011/08/priorityBehaviors.png 488w, https://www.ludep.com/wp-content/uploads/2011/08/priorityBehaviors-300x214.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/priorityBehaviors-100x71.png 100w" sizes="(max-width: 390px) 100vw, 390px" /></a></td>
</tr>
<tr>
<th style="text-align: justify;"><strong>[Figure 7]</strong> The prioritization of the movement behavior</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">Our first goal was to keep the most of the units in the flock, this is why the survival behavior (staying inside the FOV) behavior is the one with most priority. The leader avoidance is something crucial for us because we know how annoying it is to be blocked by another unit while trying to move in a world: this is why it has been given the second priority. And at last, if no one of the previous behavior has been activated, the normal movement behavior will be triggered. Indeed, in every of those case, when a robot is asked to go to a position, the <em>giveBrickDirection</em> method is called and we check if the robot is enabled to move or not (or we try to make a part of this movement).</p>
<h4 style="text-align: justify;">Results</h4>
<h4 style="text-align: justify;"><span class="Apple-style-span" style="font-weight: normal;">Well those videos are the one we took at the end of our project. Everything is working as we expected and described it above, using a webcam on the roof or using the drone. Nonetheless, if we had more time, there would be a lot more to do in order to improve this project and we will expose few ideas in the next section. In the meanwhile here is all the videos that are relevant to all that have been mentioned before. [Videos 2-5]</span></h4>
<p>&nbsp;</p>
<table class="aligncenter" width="840">
<tbody>
<tr>
<td><object width="420" height="345" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/_rIb-HE_iLY?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="420" height="345" type="application/x-shockwave-flash" src="http://www.youtube.com/v/_rIb-HE_iLY?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
<td><object width="420" height="345" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/YDeeYbvr0e8?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="420" height="345" type="application/x-shockwave-flash" src="http://www.youtube.com/v/YDeeYbvr0e8?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
</tr>
<tr>
<th style="text-align: justify;"><strong>[Video 2]</strong> <em>from above</em>: the green robot is the leader all the time it appears on the screen; as soon as it goes out of the FOV, the yellow one takes the lead. It is a great video if you want to see how the leader avoidance works: every time the leader changes direction and goes towards a unit, this very unit escapes the leader and lets the leader pass.</th>
<th style="text-align: justify;"><strong>[Video 3]</strong> <em>from above</em>: green has the lead. This time, we can see that the red goes out of the screen (the edges were defined very low for this video) and as soon it has disappeared, you can see the blue robot changing the formation.</th>
</tr>
<tr>
<td><object width="420" height="345" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/CZzpG6ndnbg?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="420" height="345" type="application/x-shockwave-flash" src="http://www.youtube.com/v/CZzpG6ndnbg?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
<td><object width="420" height="345" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/2OZxAynznAM?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="420" height="345" type="application/x-shockwave-flash" src="http://www.youtube.com/v/2OZxAynznAM?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
</tr>
<tr>
<th style="text-align: justify;"><strong>[Video 4]</strong> <em>from the field</em>: blue is the leader and we use the drone. You will see a lot of errors in this video: the yellow color is not well detected from time to time, the avoidance is not that well tuned (we had to increase the proximity threshold) and the orientation of the robot were not that well handled. The yellow unit died quite often even if we replaced it in the flock.</th>
<th style="text-align: justify;"><strong>[Video 5]</strong> <em>from the field</em>: blue is the leader and we use once more the drone. You can see the dynamic flock (at the beginning, when inserting unit one at the time), and all the avoidance behavior (all the units try not to bump into the leader and you can watch at the end, before the crash, how the red and the green unit slow down their speed in order not to cross each other&#8217;s path)</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h4 style="text-align: justify;">Improvements</h4>
<p style="text-align: justify;">First of all, we needed the robot to keep a straight orientation. It could have been done with a compass sensor and we actually did it. But we couldn&#8217;t handle all the magnetic fields in the room we are working in and this has paralyzed our project in a certain way (the use of a PID correction in order to keep the orientation almost solved the problem). And this is the reason why you might see us on some videos putting the robots straight on the floor. So, one major improvement: restore the thread on the robots making them face the same direction as the drone.</p>
<p style="text-align: justify;">Second and biggest improvement: adding behaviors to the robots. They could indeed have an obstacle avoidance behavior in order to give them more responsibilities for instance. They could try to find their way back into the FOV when lost (and the rest of the flock could wait for it or even try to look for him). Giving the robots a more autonomous behavior would without a doubt improve the project, but we should always keep in mind that the leader is the hive-mind of the system and the robots have to give it the highest priority.</p>
<p>&nbsp;<br />
<b>References</b></p>
<ol class="footnotes">
<li id="footnote_0_935" class="footnote">PhD dissertation by <em>Jakob Fredslund; Simplicity Applied in Projects Involving Embodied, Autonomous Robots; pp67-124</em></li>
</ol>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='The flock behavior: from scratch till now' data-link='https://www.ludep.com/the-flock-behavior-from-scratch-till-now/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Final words on the drone: merging previous work with new tasks</title>
		<link>https://www.ludep.com/final-words-on-the-drone-merging-previous-work-with-new-tasks/</link>
				<pubDate>Tue, 23 Aug 2011 09:42:06 +0000</pubDate>
		<dc:creator><![CDATA[Michael]]></dc:creator>
				<category><![CDATA[Drone]]></category>
		<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Ideas]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Testing]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=1033</guid>
				<description><![CDATA[Last automatic control improvements What is wrong with our Proportional Integrative Derivative (PID) controller&#8230; We have spent quite a good amount of time implementing, testing, tuning parameters and tweaking our PID controller over the last months. Our understanding of all its underlying theoretical aspects -mathematical, physical and computational- improved as much, and our results got [&#8230;] <a href="https://www.ludep.com/final-words-on-the-drone-merging-previous-work-with-new-tasks/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<h2>Last automatic control improvements</h2>
<h3>What is wrong with our Proportional Integrative Derivative (PID) controller&#8230;</h3>
<p style="text-align: justify;">We have spent quite a good amount of time implementing, testing, tuning parameters and tweaking our PID controller over the last months. Our understanding of all its underlying theoretical aspects -mathematical, physical and computational- improved as much, and our results got generally better with time. Overall, we managed to get our drone to stay on top of a defined target, at a given altitude, without drifting much. However, our main concern was that, at some point, after a few minutes of running time, it would start describing circles around the target that would get bigger and bigger, or simply drift away. It was made clear that it was nothing due to our detection algorithm, but rather had to do with our PID.</p>
<p style="text-align: justify;">And indeed, when we started to take again some hindsight and got back on all our results and data, we confirmed our very first doubts. PID controllers are great when you have to stabilize a system with one degree of freedom; more precisely, they are efficient when you need to work with one error parameter, which can be corrected by a set of actuators that do not have influence of any sort on other error parameters which also have to be regulated. Here, with our drone, we face a situation with three degrees of freedom (i.e. pitch, roll, yaw) that we try to stabilize toward our goal, and thanks to the very same actuators (i.e. our four rotors). Well, so far, we have not even tried to mess with yawing, since it was not absolutely required to achieve our project. Therefore, every time our algorithm needs to correct one degree of freedom, it is influencing the correction of the other, which needs then a better correction, and it goes on toward more and more instability, making it an explosive system.</p>
<p style="text-align: justify;">This is the conclusion we eventually came to, and that is commonly admitted by other people working on this kind of system<sup><a href="https://www.ludep.com/final-words-on-the-drone-merging-previous-work-with-new-tasks/#footnote_0_1033" id="identifier_0_1033" class="footnote-link footnote-identifier-link" title="Dronolab, a quadrotor project involving mechanical, electrical and software engineering students. They moved from a PID controller to a more sophisticated one. http://dronolab.etsmtl.ca/uav/">1</a></sup>. A solution has been researched to solve this difficulty, and a non-linear stabilization algorithm<sup><a href="https://www.ludep.com/final-words-on-the-drone-merging-previous-work-with-new-tasks/#footnote_1_1033" id="identifier_1_1033" class="footnote-link footnote-identifier-link" title="Daniel Tabak, on a general digitally controlled system: An Algorithm for Nonlinear Process Stabilization and Control, 1970">2</a></sup>, adapted to the four rotors design, seems to be the more appropriate. Solutions have been designed, implemented and experimented successfully<sup><a href="https://www.ludep.com/final-words-on-the-drone-merging-previous-work-with-new-tasks/#footnote_2_1033" id="identifier_2_1033" class="footnote-link footnote-identifier-link" title="A interesting thorough study on the design of an embedded control architecture for a four-rotors unmanned air vehicle to perform autonomous hover ﬂight:&nbsp;Escareno J., Salazar-Cruz S. and Lozano R, Embedded control of a four-rotor UAV, 2006">3</a></sup>, on similar platforms. This is a vast field of study in itself, and could still use more investigation. Unfortunately, this calls for some long dwelling on the mechanics of the quadricopter, and would require to have independent access to each of the motors (with the API, we can only control movements at a higher level, by choosing the pitch, roll and yaw), and preferably on the embedded firmware, both of which being as for now not made possible by Parrot who designed our ARDrone.</p>
<h3 style="text-align: left;">Patching our PID controller with an auto-hovering threshold</h3>
<p style="text-align: justify;">Once again, we wanted to find our way toward our project&#8217;s goal by investigating our own solutions. As we saw it during <a title="First experiment with auto-tracking" href="http://www.ludep.com/first-experiments/" target="_blank">the first experiment we performed</a> at the beginning of our project, the embedded hovering function is pretty efficient in terms of stabilizing the drone. And stabilization is a feature we lack when our PID is reaching its zero-error point, since this is when it starts to &#8220;explode&#8221; by correcting parameters it should, due to small errors right on top of the target (our PID is nevertheless best at going right to the target, by adjusting itself progressively, without much overshoot, when the drone is further from its target).</p>
<p style="text-align: justify;">However, we cannot rely on this hovering feature alone to track one robot, not to mention a whole flock of them. As a consequence, we thought about the following compromise: auto-hovering (i.e. stabilized hovering performed by an embedded algorithm we do not control) would be automatically activated when the drone finds itself in a circular area on top of our point of interest (the robot leader), whereas our PID controller would take control over the motor when outside of this restricted area (cf. <strong>Figure 1</strong>).</p>
<table class="aligncenter" width="500" align="center">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/hoverArea.png"><img class="aligncenter size-medium wp-image-1049" title="hoverArea" src="http://www.ludep.com/wp-content/uploads/2011/08/hoverArea.png" alt="" width="500" height="440" srcset="https://www.ludep.com/wp-content/uploads/2011/08/hoverArea.png 662w, https://www.ludep.com/wp-content/uploads/2011/08/hoverArea-300x263.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/hoverArea-100x87.png 100w" sizes="(max-width: 500px) 100vw, 500px" /></a></td>
</tr>
<tr>
<th><strong>Figure 1</strong>: Illustration of the behavior of the drone. The green rectangle shows the 2D field of view (FOV) as it is projected on the ground for the vertical camera. As long as the error radius (distance between target and drone) is greater than a threshold, the drone is controlled by our PID regulator. Once it reaches this threshold, PID control is stopped and the embedded hovering algorithm takes over and tries to stabilize the quadricopter.</th>
</tr>
</tbody>
</table>
<p style="text-align: justify;">By combining the best of both designs, we did achieve our best stabilization so far. Then, tracking a moving robot is also a task well-performed, which now completely fulfills the purpose of our drone, when added to the flock coordinate-reporting process. Yet we really lacked a bigger test-room setting, where our main concern was the low ceiling, preventing a long-term efficient robot-tracking, since it is really hard to keep even one robot in the camera field of view when you cannot fly comfortably higher than an average of 1,8 meters. Well, at least, that put some stimulating additional challenge into our tasks.</p>
<h2 style="text-align: justify;">Drone and ground units: how our UAV is fully controlled</h2>
<p style="text-align: justify;">We have accomplished many tasks with our ARDrone, so it might not seem quite obvious what their purpose are in the scope of our project, to the point where one could wonder how we give it commands depending on which events. This part of our article focuses on a quick recap on all the implemented methods that enable the drone to do its required actions.</p>
<h3 style="text-align: justify;">Auto landing and taking-off</h3>
<p style="text-align: justify;">Landing and taking-off are the only two stages of a whole flight over which we cannot have any control beyond sending commands to start either of those maneuvers. Once the drone acknowledges the command, the embedded software takes over the controls and operates it. Our custom algorithm never triggers these operations, which are decided by the person in charge of the drone who uses a specifically programmed controller (see part below).</p>
<p style="text-align: justify;">Besides, safe landing may happen without our own input, in case of low battery.</p>
<h3 style="text-align: justify;">Manual control</h3>
<p style="text-align: justify;">Even though most of flying time is managed by our custom algorithm which takes control over commands of the drone, we still need to be able to enter some user input at some point. The drone is first of all a rather flimsy and even sometimes dangerous flying object that could deal some minor damage to itself our its surroundings in case of bad handling: it is therefore necessary to have at least the capacity to quickly stop it completely in an emergency, or better, to switch back to a full human control in case of unwanted behavior. Moreover, since our algorithms are a lot about tuning parameters, it is advisable to enable on-the-flight parameter tweaking. The most appropriate way appeared to use a game controller that we would map to take advantage of all the sticks (great for moving the drone) and the different buttons (to give more custom orders).</p>
<p style="text-align: justify;"><strong>Figure 2</strong> shows the XBox 360 we chose and how we map its buttons to call different functions in our program. The following sums up our gamepad functionalities:</p>
<ul style="text-align: justify;">
<li><strong>Start or stop landing or taking off</strong> phase. This can be done at any time.</li>
<li><strong>Emergency stop</strong>, enabled at any time, to suddenly cut all four motors. Sometimes also required before a new take off to reset the drone&#8217;s state.</li>
<li><strong>Flat trim</strong> tells the drone that it is currently in a horizontal position: necessary for proper landing, take off and hovering &#8211; and should be done before taking off.</li>
<li><strong>Yaw, altitude, pitch and roll</strong> represent all degrees of freedom of the drone, split on two sticks. If our custom algorithm is disabled, then it is possible to control all the drone&#8217;s movements into 3D space in real-time.</li>
<li><strong>Start or stop custom algorithm</strong> enables or disables our control algorithm that will try to locate and track a leader on the ground, while reporting coordinates of all units in the flock to the leader.</li>
<li><strong>Viewpoint</strong> changes the camera viewpoint displayed on the user screen (switching between vertical, horizontal, or both cameras). While custom algorithm is enabled, you want and need to use the vertical camera.</li>
<li><strong>Stop program</strong> stops pretty much everything, except manual control.</li>
<li><strong>Start/stop hovering</strong> disables custom algorithm and manual input to activate the embedded function that stabilizes the drone. It comes of great use when you just need a stable hovering drone that does not move much.</li>
<li>At last, you can select PID parameters, one after the other, and change them.</li>
</ul>
<p>&nbsp;</p>
<table class="aligncenter" width="500" align="center">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/x360_controller_drone_transparent.png"><img class="aligncenter size-medium wp-image-1050" title="x360_controller_drone_transparent" src="http://www.ludep.com/wp-content/uploads/2011/08/x360_controller_drone_transparent.png" alt="" width="500" height="338" srcset="https://www.ludep.com/wp-content/uploads/2011/08/x360_controller_drone_transparent.png 1047w, https://www.ludep.com/wp-content/uploads/2011/08/x360_controller_drone_transparent-300x202.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/x360_controller_drone_transparent-1024x692.png 1024w, https://www.ludep.com/wp-content/uploads/2011/08/x360_controller_drone_transparent-100x67.png 100w" sizes="(max-width: 500px) 100vw, 500px" /></a></td>
</tr>
<tr>
<th><strong>Figure 2</strong>: Finally, this is how our controller is mapped. We get with it an absolute control over all the possible actions of the drone in real-time, on top of lots of ease to tune our parameters during running time. Note that this should work with any other generic controller (at least remotely compatible with Linux).</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3 style="text-align: justify;">Algorithm control</h3>
<p style="text-align: justify;">By a simple button press, one can enable our disable our custom algorithm. But what exactly does it encompass ?</p>
<h4 style="text-align: justify;">Double PID</h4>
<p style="text-align: justify;">We have a double PID controller affecting three degrees of freedom, in order to stabilize two behaviors:</p>
<ul style="text-align: justify;">
<li>a constant altitude, that we want to be set (by default) around 1,8 meters. This is done through the <code>gaz</code> command.</li>
<li>tracking the leader, and hovering on top of it by detecting its tag. This is done through the <code>pitch</code> and <code>roll</code> commands.</li>
</ul>
<p style="text-align: justify;">More details are provided in the first part of this article and in previous ones: <a title="Performing simple image analysis and full PID controller with the Drone" href="http://www.ludep.com/performing-simple-image-analysis-and-full-pid-controller-with-the-drone/" target="_blank">1</a>, <a title="Drone: new PID with polar coordinates and HowTo improve reactivity and accuracy" href="http://www.ludep.com/drone-new-pid-with-polar-coordinates-and-howto-improve-reactivity-and-accuracy/" target="_blank">2</a>.</p>
<h4 style="text-align: justify;">Tilt handling</h4>
<p style="text-align: justify;">Coordinates of the target to follow are corrected depending on the inclination and the altitude of the drone, before being fed to the PID loop. This problem and its solution are thoroughly discussed <a title="Tracking algorithm: considering the inclination of the drone" href="http://www.ludep.com/tracking-algorithm-considering-the-inclination-of-the-drone/" target="_blank">in a former article</a>.</p>
<h4 style="text-align: justify;">Detecting ground units and reporting their coordinates</h4>
<p style="text-align: justify;">Not only do we detect the tag that the drone has to track, but we also use <a title="Image analysis: color detection for multiple robots" href="http://www.ludep.com/image-analysis-color-detection-for-multiple-robots/" target="_blank">our color object detection algorithm</a> to report all coordinates of the whole set of robots to the leader of the flock.</p>
<p style="text-align: justify;">This implies that it also handles a part of a network layer, while the program starts a thread that acts as a client connecting to the leader.</p>
<h4 style="text-align: justify;">Change of tracked leader</h4>
<p style="text-align: justify;">The very last feature we needed to carry out in order to fulfill our main goals was to make sure we are tracking the right robot. Since all the robots are supposed to follow the leader, and the leader being controlled by a human user, it seems appropriate to track the unit targeted by the other units.  This way, we make sure that the leader in always in sight, which enables establishing the rest of the formation accordingly. Furthermore, if a random unit were to get lost (out of the camera&#8217;s FOV), the leader, assisted by a human, could go looking for it; once it gets close to the lost unit, the latter becomes part of the formation again, since it is finally in the camera&#8217;s FOV.</p>
<p style="text-align: justify;">We then had to establish a protocol to decide who is going to be the leader, how the drone gets this information and how it should respond to it:</p>
<ol>
<li style="text-align: justify;">Leader number (<code>LeaderNumber</code>, i.e. the id of the robot chosen as a leader) is decided on the flock side, usually by the human who controls the leader itself.</li>
<li style="text-align: justify;"><code>LeaderNumber</code> is passed to the drone&#8217;s program through the same client/server socket connection that is used for sending the flock coordinates. The drone has a thread continuously listening for new events on this socket, and registers the current <code>LeaderNumber</code>.</li>
<li style="text-align: justify;">Once we get this <code>LeaderNumber</code>, the drone has to try to follow the corresponding unit on the ground. However, in some cases, the unit may not be in sight, or the <code>LeaderNumber</code> may not even be decided yet. The logical steps that help the drone take the right course of action is detailed in the decision tree in <strong>Figure 3</strong>.</li>
</ol>
<p>&nbsp;</p>
<table class="aligncenter" width="573" align="center">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/LeaderNumber_DecisionTree_transparent.png"><img class="aligncenter size-full wp-image-1051" title="LeaderNumber_DecisionTree_transparent" src="http://www.ludep.com/wp-content/uploads/2011/08/LeaderNumber_DecisionTree_transparent.png" alt="" width="573" height="477" srcset="https://www.ludep.com/wp-content/uploads/2011/08/LeaderNumber_DecisionTree_transparent.png 819w, https://www.ludep.com/wp-content/uploads/2011/08/LeaderNumber_DecisionTree_transparent-300x249.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/LeaderNumber_DecisionTree_transparent-100x83.png 100w" sizes="(max-width: 573px) 100vw, 573px" /></a></td>
</tr>
<tr>
<th><strong>Figure 3</strong>: Decision tree to find the number (id) of the robot leader and the drone&#8217;s action that should ensue. <em>Hover</em> means here simply hovering on the current spot, with the embedded stabilization algorithm.</th>
</tr>
</tbody>
</table>
<p style="text-align: justify;">
Basically, this means that we have added a new way to directly influence the behavior of the drone, by adding a input for the robot leader, on top of the human direct input with the gamepad and the algorithmic PID control.</p>
<h4>Testing everything together</h4>
<p style="text-align: justify;">Our very last tests include all the above-mentioned features, that appear to work quite smoothly simultaneously, even when working with our flock of four robots. No unexpected behaviors were observed during our final experiments, so everything was pretty much already discussed in previous articles. The last part that was asking for testing consists in the leader switching task. Since our robot detection, our communication protocol and our drone hovering were already performing good separately, we did not have much tuning to do. Video 1 below is here to illustrate this performance.</p>
<p>&nbsp;</p>
<table class="aligncenter" width="420" align="center">
<tbody>
<tr>
<td><object width="420" height="345" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/_EKoG7ML7VU?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="420" height="345" type="application/x-shockwave-flash" src="http://www.youtube.com/v/_EKoG7ML7VU?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
</tr>
<tr>
<th><strong>Video 1</strong>: The ARDrone is tracking two robots from our flock. Our flock-control program switches the &#8220;leader&#8221; (done manually here, for illustration purpose), i.e. the robot that leads the flock and that the drone is supposed to follow.So here, the leader switches back and forth between red and blue, and the drone moves accordingly and tries to hover on top of it.Hovering is not 100% steady. This is greatly due to a lack of altitude from the drone; our ceiling is too low to get a field of view good enough!For filming and testing purpose, it was necessary to focus on no more than two still units. Note that it however work as good as with more, moving robots.</th>
</tr>
</tbody>
</table>
<p>Videos and other more complete experiments will be to watch in our next article, where we deal with the whole flock and the drone.&nbsp;<br />
<b>References</b></p>
<ol class="footnotes">
<li id="footnote_0_1033" class="footnote"><em>Dronolab, a quadrotor project involving mechanical, electrical and software engineering students.</em> They moved from a PID controller to a more sophisticated one. <a href="http://dronolab.etsmtl.ca/uav/" target="_blank">http://dronolab.etsmtl.ca/uav/</a></li>
<li id="footnote_1_1033" class="footnote">Daniel Tabak, on a general digitally controlled system: <em>An Algorithm for Nonlinear Process Stabilization and Control, 1970</em></li>
<li id="footnote_2_1033" class="footnote">A interesting thorough study on the design of an embedded control architecture for a four-rotors unmanned air vehicle to perform autonomous hover ﬂight: <em>Escareno J., Salazar-Cruz S. and Lozano R, Embedded control of a four-rotor UAV, 2006</em></li>
</ol>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Final words on the drone: merging previous work with new tasks' data-link='https://www.ludep.com/final-words-on-the-drone-merging-previous-work-with-new-tasks/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Merging our work together: the beginnings of worthy and notable results.</title>
		<link>https://www.ludep.com/merging-our-work-together-the-beginnings-of-worthy-and-notable-results/</link>
				<pubDate>Thu, 04 Aug 2011 18:28:42 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Ideas]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Refining the project]]></category>
		<category><![CDATA[Testing]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=841</guid>
				<description><![CDATA[It&#8217;s been two weeks now we have been working together in order to merge our work (one on the drone/image analysis and the other on the land units/flock behavior). This post will present you our latest changes, improvements and show you the first results we came out with. &#160; More about the flock behavior The [&#8230;] <a href="https://www.ludep.com/merging-our-work-together-the-beginnings-of-worthy-and-notable-results/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<p style="text-align: justify;">It&#8217;s been two weeks now we have been working together in order to merge our work (one on the drone/image analysis and the other on the land units/flock behavior). This post will present you our latest changes, improvements and show you the first results we came out with.</p>
<p>&nbsp;</p>
<h2 style="text-align: justify;">More about the flock behavior</h2>
<p style="text-align: justify;">The flock behavior is not entirely implemented yet. By &#8220;entirely&#8221; and &#8220;yet&#8221;, we mean that we only have two robots: one leading and the other one following, being as such the only following member of the flock. Still, the flock behavior is on its way to the full implementation and we have right now a lot of features that make the system properly working. Among those features, you can namely find:</p>
<p>&nbsp;</p>
<h3 style="text-align: justify;">An enhanced GUI</h3>
<p style="text-align: justify;">We wanted to be able to choose the bricks we wanted to use, be able to reconnect them if any problem happened, without being forced to restart all the program and the bricks. We came out with the following design, handy for taking control according to our needs and to display the information we needed from the bricks.</p>
<p style="text-align: justify;"><a href="http://www.ludep.com/wp-content/uploads/2011/08/GUI1.png"><img class="aligncenter size-full wp-image-842" title="GUI1" src="http://www.ludep.com/wp-content/uploads/2011/08/GUI1.png" alt="" width="900" height="105" srcset="https://www.ludep.com/wp-content/uploads/2011/08/GUI1.png 900w, https://www.ludep.com/wp-content/uploads/2011/08/GUI1-300x35.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/GUI1-100x11.png 100w" sizes="(max-width: 900px) 100vw, 900px" /></a></p>
<p>&nbsp;</p>
<p style="text-align: justify;">First notable thing is that the GUI is dynamic: it will display a number of lines according to the devices initially added in the program. For each device, you can connect it in order to add it to the flock simply by clicking on its button or clicking on the &#8220;Connect all bricks&#8221; button.</p>
<p>&nbsp;</p>
<p style="text-align: justify;"><a href="http://www.ludep.com/wp-content/uploads/2011/08/GUI2.png"><img class="aligncenter size-full wp-image-846" title="GUI2" src="http://www.ludep.com/wp-content/uploads/2011/08/GUI2.png" alt="" width="901" height="106" srcset="https://www.ludep.com/wp-content/uploads/2011/08/GUI2.png 901w, https://www.ludep.com/wp-content/uploads/2011/08/GUI2-300x35.png 300w, https://www.ludep.com/wp-content/uploads/2011/08/GUI2-100x11.png 100w" sizes="(max-width: 901px) 100vw, 901px" /></a></p>
<p>&nbsp;</p>
<p style="text-align: justify;">Once connected, the second button will allow to take control of the brick either using the controller, or writing in the field with command lines compatible with the brick&#8217;s interpreter. The brick will feed the computer back in real-time: confirmation message on the first label and the battery level on the second one (we will talk more about this one later).</p>
<p>&nbsp;</p>
<h3 style="text-align: justify;">The change of leader</h3>
<p style="text-align: justify;">The change of leader is something we wanted to focus on because no one never knows what problem is going to happen during an experiment and for instance, the leader might perish. So, at this point, it was important to know what strategy to adopt if the flock loses its leader. The solution we used is simply to change randomly the leader if this one is lost. Nevertheless, another solution can be added: we could indeed find the nearest robot to the leader and give it the lead. Another solution would be to give different priorities to the robots as if they had more importance according to their status (it is easy to state that a tank is more likely to take the lead rather than an ambulance carrying people).</p>
<p style="text-align: justify;">As we mentioned before, it is possible to change the leader of the flock and thus change the formation in real-time. The bricks in use are checked quite often (in a separate thread); so even if a brick connects to the flock after the program has started or disconnects from it during the experiment, a new leader will be picked, automatically or manually. Mentioning that, the notion of disconnection brought us to develop an interesting feature that follows.</p>
<p>&nbsp;</p>
<h3 style="text-align: justify;">The management of dead units</h3>
<p style="text-align: justify;">If we want to compute the positions of every brick, we need to know the exact number of units in the flock and if they are properly connected. If not, we would have a lot of delay and this would tremendously affect our results. The brick must warn the computer of its state so as to ease the computer in its calculation.</p>
<p style="text-align: justify;">As soon as a brick is connected, it has a thread running, giving every half second a heartbeat. On the computer side, we make sure for each brick that we receive those heartbeats. If not, after five heartbeats missed (2.5 seconds of silence from the brick), we shut the connection and get ready to re-open it whenever the user wants it (maybe the time to fix the brick and put it back on track). At the same time, the brick itself sends its own battery level in every heartbeat: this is an information that can be relevantly used by the user and depending on a certain threshold (that we set around 6,1V), the brick sends a message <em>&#8220;Battery level too low&#8221;</em>, shuts the connection with the computer and turn itself down.</p>
<p style="text-align: justify;">Here is a sample of the computer-side code for the heartbeat counter checker.</p>
<pre>public void run()
	{
		resetCount();

		while (getHeartBeatChecker() &lt; 5) {
			try {
				Thread.sleep(500);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}

			setHeartBeatChecker(getHeartBeatChecker()+1);
		}

		brick.closeConnection();
		interrupt();
	}</pre>
<p>&nbsp;</p>
<h3 style="text-align: justify;">An oriented flock</h3>
<p style="text-align: justify;">This is the feature we are the most proud of and where the omniwheels are the most useful and worthy. The flock is not just supposed to follow the leader in a simple direction: no matter which direction the leader is going to, the flock is going to stay behind. Thus, the flock is moving really often, especially when the leader is changing direction, but this is even more pleasant to watch when it happens (this will be completely covered in the next and final article about the flock behavior, this is just a sample/teaser).</p>
<table class="aligncenter" width="546">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/fb1.png"><img class="aligncenter size-medium wp-image-862" title="fb1" src="http://www.ludep.com/wp-content/uploads/2011/08/fb1-253x300.png" alt="" width="253" height="300" srcset="https://www.ludep.com/wp-content/uploads/2011/08/fb1-253x300.png 253w, https://www.ludep.com/wp-content/uploads/2011/08/fb1-84x100.png 84w, https://www.ludep.com/wp-content/uploads/2011/08/fb1.png 477w" sizes="(max-width: 253px) 100vw, 253px" /></a></td>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/08/fb2.png"><img class="aligncenter size-medium wp-image-863" title="fb2" src="http://www.ludep.com/wp-content/uploads/2011/08/fb2-253x300.png" alt="" width="253" height="300" srcset="https://www.ludep.com/wp-content/uploads/2011/08/fb2-253x300.png 253w, https://www.ludep.com/wp-content/uploads/2011/08/fb2-84x100.png 84w, https://www.ludep.com/wp-content/uploads/2011/08/fb2.png 477w" sizes="(max-width: 253px) 100vw, 253px" /></a></td>
</tr>
<tr>
<th>As soon as the leader changes direction&#8230;</th>
<th>&#8230;the flock adapts and changes its orientation</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3 style="text-align: justify;">An enclosure system</h3>
<p style="text-align: justify;">The field of view of the camera can be a major problem in our project. For instance, a robot can be asked to go out of sight so as to respect the position it is supposed to be at. This is not a suitable behavior (indeed, we want to keep all the units in the flock) so every time a robot is close to the limit of the FOV, it is asked to get closer to the leader. The drone is supposed to be on top of the leader, so the units will get closer to the camera&#8217;s FOV doing such.</p>
<p>&nbsp;</p>
<h2 style="text-align: justify;">What the flock looks like so far</h2>
<h3 style="text-align: justify;">Very first working test</h3>
<p style="text-align: justify;">On this video, the flock is just supposed to stay below the leader (blue unit) and thus does not take care of the orientation given by the user/leader: the flock is supposed to stay oriented towards the white wall at the background.</p>
<table class="aligncenter" width="425">
<tbody>
<tr>
<td>
<p style="text-align: justify;"><object width="425" height="349" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/BQfWkJomMmw?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="425" height="349" type="application/x-shockwave-flash" src="http://www.youtube.com/v/BQfWkJomMmw?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></p>
</td>
</tr>
</tbody>
</table>
<p>The behavior is not suitable at all, the robot stops and starts over all the time: we&#8217;re not getting the fluidity we were looking for. This is why we implemented a P (proportional) correction on the movement and it fixed the problem as you will see it in the next videos. Nevertheless, a first step was made: the flock was moving as expected and it was ready to go to the step further.</p>
<p>&nbsp;</p>
<h3 style="text-align: justify;">Testing the oriented flock</h3>
<p style="text-align: justify;">From now on, the flock is oriented, no matter what direction the user sets (the red unit follows the blue one, once more). Nonetheless, we didn&#8217;t implement a collision avoidance layer yet, so you might want to be careful not to change the orientation and driving forward another robot for instance.</p>
<table class="aligncenter" width="425">
<tbody>
<tr>
<td>
<p style="text-align: justify;"><object width="425" height="349" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/WrCJn1y8b8Y?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="425" height="349" type="application/x-shockwave-flash" src="http://www.youtube.com/v/WrCJn1y8b8Y?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>The robot behaves as expected. It even seems to reproduce the movements of the leader with a little delay but the flock is only positioning itself at the opposite direction of the leader. The P (proportional) correction is working quite well: we don&#8217;t have any overshot and it seems to be sufficient for what the robot are supposed to do.</p>
<h3 style="text-align: justify;">Taking a closer look to the &#8220;edge limit&#8221; feature</h3>
<p style="text-align: justify;">The only thing you have to know here is that the black stripes on the floor are the limits of the field of view. From this point, the behavior is pretty simple: every time the a robot is soon to be out of the FOV, it is asked to get closer to the leader.</p>
<table class="aligncenter" width="425">
<tbody>
<tr>
<td><object width="425" height="349" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/XMUpBj0YynU?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="425" height="349" type="application/x-shockwave-flash" src="http://www.youtube.com/v/XMUpBj0YynU?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
</tr>
</tbody>
</table>
<p style="text-align: justify;">The system is properly working. When the leader is no longer seen on the image (that shouldn&#8217;t happen because the drone is supposed to stay over the leader, but this is just for testing purposes), the robot following gets closer to the last recorded position of the leader (which was along the limits of the FOV)  and therefore doesn&#8217;t go out the FOV.</p>
<p>At this point, it is interesting to observe the whole behavior and get surprised with things we didn&#8217;t expect. For instance, when the leader is out of sight, the robot following gets slower and sometimes move to unpredictable positions (still along the FOV, and it might be due to some misinterpretation of the color recognition) and seems to be lost without its leader. As soon as the leader comes back in the field; the proportional correction implemented on the movements make the robot almost run towards the leader. Call that loyalty or something else, but it&#8217;s always nice to see that basic behaviors merged together can unexpectedly lead to real ones&#8230;</p>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Merging our work together: the beginnings of worthy and notable results.' data-link='https://www.ludep.com/merging-our-work-together-the-beginnings-of-worthy-and-notable-results/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Arrival of the new omniwheels</title>
		<link>https://www.ludep.com/arrival-of-the-new-omniwheels/</link>
				<pubDate>Fri, 01 Jul 2011 12:51:23 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Building]]></category>
		<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Refining the project]]></category>
		<category><![CDATA[Testing]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=702</guid>
				<description><![CDATA[It&#8217;s been one week now we are testing the new Rotacaster omniwheels LEGO compatible1 with our omnidirectional robot. Here is a picture with those wheels integrated with the new design. We ran quite numerous tests with the new omniwheels: we&#8217;ll show you in this article the differences with the old ones, fully study the performances of [&#8230;] <a href="https://www.ludep.com/arrival-of-the-new-omniwheels/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<p style="text-align: justify;"><a href="http://www.ludep.com/wp-content/uploads/2011/06/Rotacaster.png"><img class="size-medium wp-image-706 alignleft" title="Rotacaster" src="http://www.ludep.com/wp-content/uploads/2011/06/Rotacaster-300x170.png" alt="" width="300" height="170" srcset="https://www.ludep.com/wp-content/uploads/2011/06/Rotacaster-300x170.png 300w, https://www.ludep.com/wp-content/uploads/2011/06/Rotacaster-1024x582.png 1024w, https://www.ludep.com/wp-content/uploads/2011/06/Rotacaster-100x56.png 100w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p style="text-align: justify;">It&#8217;s been one week now we are testing the new Rotacaster omniwheels LEGO compatible<sup><a href="https://www.ludep.com/arrival-of-the-new-omniwheels/#footnote_0_702" id="identifier_0_702" class="footnote-link footnote-identifier-link" title="http://www.rotacaster.com.au/robot-wheels.html">1</a></sup> with our omnidirectional robot. Here is a picture with those wheels integrated with the new design.</p>
<p style="text-align: justify;">We ran quite numerous tests with the new omniwheels: we&#8217;ll show you in this article the differences with the old ones, fully study the performances of Rotacaster omniwheels and what can be your expectations when you get those ones.</p>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">&nbsp;</p>
<h2 style="text-align: justify;">Our LEGO design vs. Rotacaster LEGO compatible design</h2>
<table class="aligncenter" width="890">
<tbody>
<tr>
<td><object width="425" height="349" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/HpdgqefL2so?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="425" height="349" type="application/x-shockwave-flash" src="http://www.youtube.com/v/HpdgqefL2so?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
<td><object width="425" height="349" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/-kWDNVSWzoI?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="425" height="349" type="application/x-shockwave-flash" src="http://www.youtube.com/v/-kWDNVSWzoI?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
</tr>
<tr>
<th>Without correction</th>
<th>With PI correction</th>
</tr>
</tbody>
</table>
<p style="text-align: justify;">This test is supposed to give the worst results for one reason: every time the robot is given a new direction command, it&#8217;s making a light rotation provided that the two angles are close to each other (&lt;20°). We had the worst results with 90° turns, and this is the reason why on those videos, the robots (old omniwheel vs Rotacaster design) are making a square (about  7 meters perimeter) at the same time so as to observe their behavior.  In order to sum up the differences of both robots, making a table seemed to be more convenient.</p>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">&nbsp;</p>
<table class="aligncenter">
<tbody>
<tr>
<th></th>
<th colspan="2">Custom LEGO omniwheel design</th>
<th colspan="2">Rotacaster omniwheel design</th>
</tr>
<tr>
<td></td>
<td><strong>No correction</strong></td>
<td><strong>PI correction</strong></td>
<td><strong>No correction</strong></td>
<td><strong>PI correction</strong></td>
</tr>
<tr>
<td><strong>Straight lines</strong></td>
<td><em>Poor</em></td>
<td><em>Acceptable</em></td>
<td><em>Really nice</em></td>
<td><em>Close to perfection</em></td>
</tr>
<tr>
<td><strong>Measured errors</strong></td>
<td><em>Strong distance and angular errors</em></td>
<td><em>Improved behavior but still not acceptable</em></td>
<td><em>Distance OK, angle can be improved</em></td>
<td><em>Distance still OK and angle really close to expectations</em></td>
</tr>
<tr>
<td><strong>Reliability</strong></td>
<td colspan="2"><em>Nice in order to test an omnidirectional device, but lacks of accuracy, adherence. You cannot get functional and light omniwheel at the same time and this is a huge constraint.</em></td>
<td colspan="2"><em>A surprise. Totally unexpected. Even without correction the model is better than ours. With such a project we have, we need accuracy and coupled with a correction, that&#8217;s the best deal.</em></td>
</tr>
</tbody>
</table>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">&nbsp;</p>
<h2 style="text-align: justify;">Rotacaster omniwheel accuracy tests</h2>
<h3 style="text-align: justify;">Results</h3>
<p style="text-align: justify;">After observing the tremendous difference that we obtained with our new omniwheels, we wanted to look at the accuracy closer. In order to do that, we coded a function able to make the robot draw a polygon (with a parameterisable number of sides and length for the perimeter) and we run several test with different number of side and compared the results with and without correction. Here is the algorithm:</p>
<pre style="text-align: justify;">public void drawPentagone(int iter, int len)
{
   if ( iter &lt; 2 ) return;
   int angle = 360/iter;

   for (int i = 0; i &lt; iter; i++) {
      moveAngLen(angle/2+i*angle, len/iter);
   }
}</pre>
<p style="text-align: justify;">After that, we ran the tests (several times for each configuration, taking the average as a result) and measured the distance errors (distance from the finishing to the starting point, supposed to be the same) and angular errors (the robot isn&#8217;t supposed to turn on itself, this error is simply the angular difference between the starting and finishing point).</p>
<p style="text-align: justify;"><a href="http://www.ludep.com/wp-content/uploads/2011/06/omniwheel_Rotacaster_performances.png"><img class="aligncenter size-full wp-image-728" title="omniwheel_Rotacaster_performances" src="http://www.ludep.com/wp-content/uploads/2011/06/omniwheel_Rotacaster_performances.png" alt="" width="934" height="276" srcset="https://www.ludep.com/wp-content/uploads/2011/06/omniwheel_Rotacaster_performances.png 934w, https://www.ludep.com/wp-content/uploads/2011/06/omniwheel_Rotacaster_performances-300x88.png 300w, https://www.ludep.com/wp-content/uploads/2011/06/omniwheel_Rotacaster_performances-100x29.png 100w" sizes="(max-width: 934px) 100vw, 934px" /></a></p>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">&nbsp;</p>
<h3 style="text-align: justify;">Interpretation / Conclusion</h3>
<p style="text-align: justify;">First, as mentioned before, the robot is really accurate as long as the commands doesn&#8217;t change much the directions given to the robot: this is why we have really interesting results for n=2. We can see that we have a peak for n=4 as we explained before but it is interesting to look at the behavior of the curbs starting at n=9.</p>
<p style="text-align: justify;">Without any correction, the results are totally unreliable within the time: the system is reliable for few movements but the more turns there are, the bigger the errors get (the last test we did was with a 360-sided polygon, it was almost supposed to be a circle but we weren&#8217;t close enough to call that a circle).</p>
<p style="text-align: justify;">Nonetheless, with a simple PI correction (that might be better tuned along the project, even upgraded to a PID) the errors tend to be constant and more than acceptable: with the 360 sided polygon, we had 20 centimeters of &#8220;distance error&#8221; (over 7 meters and 359 turns) and less than 10° of &#8220;angular error&#8221;.</p>
<p style="text-align: justify;">We are obviously aware that we can not reach a perfect regulation simply because the robot is only regulating itself with its self parameters (tacho count of the motors) and nothing else. Indeed it would be better if we had another sensors (as the compass that we tried before) that could be 100% reliable but our previous tests showed us that it wasn&#8217;t possible (with the LEGO technologies, at least). So for the time being, the results we came out with are more than enough for our project and we know that we can make it even more accurate if we spend some more time on the PID.</p>
<p style="text-align: justify;">We hope this article demonstrated you the use of the PID and that self made design are indeed enriching and give fuel for thought for the community but don&#8217;t ever play cheap and know how to allocate wisely your resources for the faith of your project. In that case, if you need to build omnidirectional devices, Rotacaster is a sure investment.</p>
<p>&nbsp;<br />
<b>References</b></p>
<ol class="footnotes">
<li id="footnote_0_702" class="footnote"><a href="http://www.rotacaster.com.au/robot-wheels.html">http://www.rotacaster.com.au/robot-wheels.html</a></li>
</ol>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Arrival of the new omniwheels' data-link='https://www.ludep.com/arrival-of-the-new-omniwheels/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Some steps further with the omnidirectional robot</title>
		<link>https://www.ludep.com/some-steps-further-with-the-omnidirectional-robot/</link>
				<pubDate>Mon, 20 Jun 2011 14:39:17 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Ideas]]></category>
		<category><![CDATA[Issues]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Refining the project]]></category>
		<category><![CDATA[Testing]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=637</guid>
				<description><![CDATA[In this article, we&#8217;ll focus on the driving behavior of the robot. Indeed, we need it to be as accurate as possible in every of his moves and we need it to be able to go in every direction. So we&#8217;ll explain here how the robot is supposed to move without turning and how we [&#8230;] <a href="https://www.ludep.com/some-steps-further-with-the-omnidirectional-robot/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<p style="text-align: justify;">
<p style="text-align: justify;">In this article, we&#8217;ll focus on the driving behavior of the robot. Indeed, we need it to be as accurate as possible in every of his moves and we need it to be able to go in every direction. So we&#8217;ll explain here how the robot is supposed to move without turning and how we implemented the movement system accordingly.</p>
<p style="text-align: justify;">
<h2 style="text-align: justify;">How can we get rid of the rotation ?</h2>
<h3 style="text-align: justify;">Mathematical point of view or how to &#8220;mettre les mains dans le cambouis&#8221;</h3>
<p style="text-align: justify;">Basically, the kiwi drive is just a point on which we apply three different rotations. The question is &#8220;how should we settle the rotations (i.e. power applied to the motors) so as to ensure a translation instead of a clumsy rotation&#8221;.</p>
<p style="text-align: justify;">If we use the complex notation for planar geometry, a rotation would be in the form of the following equation, with<em> </em> being the image of  by the rotation of center  and angle θ.</p>
<p style="text-align: justify;"><a href="http://www.ludep.com/wp-content/uploads/2011/06/maths1.png"><img class="size-full wp-image-648 aligncenter" title="maths1" src="http://www.ludep.com/wp-content/uploads/2011/06/maths1.png" alt="" width="189" height="65" srcset="https://www.ludep.com/wp-content/uploads/2011/06/maths1.png 189w, https://www.ludep.com/wp-content/uploads/2011/06/maths1-100x34.png 100w" sizes="(max-width: 189px) 100vw, 189px" /></a></p>
<p style="text-align: center;">If we compose two rotations, we’ll get the following equation</p>
<p style="text-align: justify;"><a href="http://www.ludep.com/wp-content/uploads/2011/06/maths2.png"><img class="size-full wp-image-650 aligncenter" title="maths2" src="http://www.ludep.com/wp-content/uploads/2011/06/maths2.png" alt="" width="353" height="264" srcset="https://www.ludep.com/wp-content/uploads/2011/06/maths2.png 353w, https://www.ludep.com/wp-content/uploads/2011/06/maths2-300x224.png 300w, https://www.ludep.com/wp-content/uploads/2011/06/maths2-100x74.png 100w" sizes="(max-width: 353px) 100vw, 353px" /></a></p>
<p style="text-align: justify;">We put this equation (4) in that special form so as to show that if we have θ + θ &#8216; = 0, the first exponential term is equal to one and thus we obtain z &#8216; &#8216; = z + a   ; which is the formula of a translation in complex notation. We can see that the composition of two rotations is a translation as long as the sum of the rotation angles is equal to zero. This is very understandable; indeed if we compose two opposite rotations we have a translation, as everybody who has already driven a car may have noticed… The problem is that we compose three rotations for the kiwi drive: do we get the same result? Well, let’s just look at that.</p>
<p style="text-align: justify;"><a href="http://www.ludep.com/wp-content/uploads/2011/06/maths3.png"><img class="size-full wp-image-651 aligncenter" title="maths3" src="http://www.ludep.com/wp-content/uploads/2011/06/maths3.png" alt="" width="495" height="296" srcset="https://www.ludep.com/wp-content/uploads/2011/06/maths3.png 495w, https://www.ludep.com/wp-content/uploads/2011/06/maths3-300x179.png 300w, https://www.ludep.com/wp-content/uploads/2011/06/maths3-100x59.png 100w" sizes="(max-width: 495px) 100vw, 495px" /></a></p>
<p style="text-align: justify;">Once more with (6), we can see that θ + θ &#8216;+ θ &#8216; &#8216; = 0 induces a translation. This could have been easily anticipated knowing that planar rotations form a group (mathematically speaking; namely that a composition of two rotation is either a rotation or a translation) and therefore, our result for two rotations would be expandable for three. At this point we knew that keeping this sum equal to zero was primary in order to ensure the reliability of the kiwi drive and that corrections like PID would be a major and powerful tool to use.</p>
<p style="text-align: justify;">
<h3 style="text-align: justify;">Physical point of view or how to prevent and correct errors</h3>
<p style="text-align: justify;">If the physics could stick to the mathematical theory, well first we would not be forced to make obscures approximations and inconvenient assumptions but in our case, our robot would never turn on itself if we respect the condition &#8220;the sum of the rotations must be equal to zero&#8221;. Unfortunately due to imperfection purpose (robot construction not 100% robust, friction, measurement errors, etc), we&#8217;re forced to face the case that the robot might and will change its orientation within the time. In order to counteract this issue, we came out with a simple system. We&#8217;ve implemented a thread running all the time (but can still disabled for testing or manual driving purpose) which samples the motors position thanks to the method <em>Motor.MOTOR_PORT.getTachoCount()</em>: and if the sum of every motor is different to the reference it should have, we command the robot to make a gentle counter rotation.</p>
<p style="text-align: justify;">Here is some code in which you can see the way we counter the rotation using a PI correction (soon to be PID or PD, according to the result obtained we&#8217;ll have with our new omniwheels):</p>
<pre>while(isInRegulation()){
    noRotInt += noRot;  // Integral term
    noRot = ref - getMotorTachoCountSum(); // Proportional Term
    corRot = noRot*getCm().getFactorP() + noRotInt*getCm().getFactorI(); // PI Correction
    getCm().setRotationPower(corRot); // Apply counter rotation
    getCm().refreshMotors(); // Apply new powers to motors
}</pre>
<pre>public int getMotorTachoCountSum(){
    return Motor.A.getTachoCount() + Motor.B.getTachoCount() + Motor.C.getTachoCount();
}</pre>
<h2>How do we make the robot move ?</h2>
<p>The first thing we wanted the robot to do was to go in a direction within a certain range. Then we implemented a Cartesian referential (so as to be more convenient for the flock behavior implementation later) simply by changing the base. So for the implementation, we had to ask ourselves:</p>
<ul>
<li>what is the power to give to each motor so as to respect the condition &#8220;the sum of every rotation angle must be equal to zero&#8221;;</li>
<li>when and how the robot should stop;</li>
<li>how to interpret several commands (stack or &#8220;last command prevails&#8221; behavior).</li>
</ul>
<p>&nbsp;</p>
<p style="text-align: justify;">In order to do deal with the powers, we knew that for any movement, each motor has to rotate different amount of degrees (in the major part of all the cases) in the same amount of time. Thus, motors&#8217; power had to be different without making the robot rotate on itself. At this point, we tried to apply powers to each motors with the sum of powers equals to zero. And the results went better than expected because it was working pretty well. We had to take care of the low powers (because the robot wasn&#8217;t moving that much between 0 and 20) simply by applying a scale factor.</p>
<p style="text-align: justify;">So as to be functional, every motor has to rotate a certain amount of degree (we&#8217;ll say that the motor A has to rotate <em>a</em> degrees, <em>b</em> degrees for B and <em>c</em> degrees for C) and respect <em>a+b+c=0</em> (we write &#8220;0&#8221; in order to be coherent with our reasoning but in reality, it&#8217;s equal to the very first value sampled by <em>getMotorTachoCountSum()</em> written above). The point of this equation is that it has to be true at every moment of the movement. So we made a graph that shows the percentage of progress of each motor, without correction in order to picture how accurate the system could be.</p>
<table class="aligncenter" width="462">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/06/powersMotors.png"><img class="size-full wp-image-677 aligncenter" title="powersMotors" src="http://www.ludep.com/wp-content/uploads/2011/06/powersMotors.png" alt="" width="462" height="262" srcset="https://www.ludep.com/wp-content/uploads/2011/06/powersMotors.png 462w, https://www.ludep.com/wp-content/uploads/2011/06/powersMotors-300x170.png 300w, https://www.ludep.com/wp-content/uploads/2011/06/powersMotors-100x56.png 100w" sizes="(max-width: 462px) 100vw, 462px" /> </a></td>
</tr>
<tr>
<th>Percentage of progress of each motor over a movement of 2 meters with no correction. The motors are however regulating themselves with the method Motor.MOTOR_PORT.regulateSpeed(true)</th>
</tr>
</tbody>
</table>
<p style="text-align: center;">
<p style="text-align: justify;">Showing this graph was important in order to jump over the second question, which tends to find out how to stop the robot. The first and naive way would be to stop the movement as soon as the three motors completed their movements, i.e. when the line  (letting the first two one continuing rotating till the last one ends). Problem is, when one of the motors is under very low-speed, he may never complete his rotation or complete it instantaneously. So waiting for three motors led to infinite movement, waiting for one led to premature stops and waiting for two was just perfect because in any movement, the robot is supposed to use two motors with reasonable (&gt;20) powers.</p>
<p style="text-align: justify;">Concerning the commands behavior, we had to adopt a fusion of &#8220;last command prevails&#8221; and the stack behavior so as to be able to merge autonomous and manual movements.</p>
<p style="text-align: justify;">
<h2>Testing the robot</h2>
<p>Here is two videos about the robot making a rectangle (simple succession of four commands) without and with PI correction.</p>
<p style="text-align: center;">
<table class="aligncenter" width="850">
<tbody>
<tr>
<td><object width="425" height="349" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/S46HH7ubZvs?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="425" height="349" type="application/x-shockwave-flash" src="http://www.youtube.com/v/S46HH7ubZvs?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
<td><object width="425" height="349" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/uCfAaELqaTo?version=3&amp;hl=en_US" /><param name="allowfullscreen" value="true" /><embed width="425" height="349" type="application/x-shockwave-flash" src="http://www.youtube.com/v/uCfAaELqaTo?version=3&amp;hl=en_US" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" /></object></td>
</tr>
<tr>
<th>Without correction</th>
<th>With PI correction</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">As you can see, the system is quite more accurate with the PI correction. Nonetheless, it is still not reliable and does not fit our project requirements. We&#8217;ve been trying to tune the PI (/PID) and obtained more or less satisfying results but still not that acceptable. But we got a very nice surprise at the end of the last week: we received the Rotacaster omniwheels and tried it. We don&#8217;t want to spoil the next article, but the accuracy should not be a major issue from now on. We&#8217;re still delivering a picture of the measurement for the errors in order to give you an idea of the impact of the correction (knowing that the robot is supposed to make a square of side sqrt(2), so more than 7 meters).</p>
<p>&nbsp;</p>
<p><a href="http://www.ludep.com/wp-content/uploads/2011/06/IMAG0187.jpg"><img class="aligncenter size-large wp-image-688" title="IMAG0187" src="http://www.ludep.com/wp-content/uploads/2011/06/IMAG0187-1024x613.jpg" alt="" width="640" height="383" srcset="https://www.ludep.com/wp-content/uploads/2011/06/IMAG0187-1024x613.jpg 1024w, https://www.ludep.com/wp-content/uploads/2011/06/IMAG0187-300x179.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/06/IMAG0187-100x59.jpg 100w, https://www.ludep.com/wp-content/uploads/2011/06/IMAG0187.jpg 1296w" sizes="(max-width: 640px) 100vw, 640px" /></a></p>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Some steps further with the omnidirectional robot' data-link='https://www.ludep.com/some-steps-further-with-the-omnidirectional-robot/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Improving the omnidirectional robot design</title>
		<link>https://www.ludep.com/improving-the-omnidirectional-robot-design/</link>
				<pubDate>Wed, 01 Jun 2011 14:23:40 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Building]]></category>
		<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Ideas]]></category>
		<category><![CDATA[Issues]]></category>
		<category><![CDATA[Refining the project]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=566</guid>
				<description><![CDATA[It&#8217;s been two weeks now we have been struggling with a major issue. After implementing the manual driving mode, we wanted the robot to move to specific positions and we encountered problems with accuracy. For instance, on a same command, the robot could have different behaviors, totally unpredictable. We sure knew this could be improved [&#8230;] <a href="https://www.ludep.com/improving-the-omnidirectional-robot-design/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<p style="text-align: justify;">It&#8217;s been two weeks now we have been struggling with a major issue. After implementing the manual driving mode, we wanted the robot to move to specific positions and we encountered problems with accuracy. For instance, on a same command, the robot could have different behaviors, totally unpredictable. We sure knew this could be improved thanks to several corrections (like a PID that we&#8217;ve been working on recently) but still, we thought those errors couldn&#8217;t be only due to the mechanics. Finally, we found that our error was tremendously amplified by the orientation of the omniwheels.</p>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">Indeed, instead of putting the omniwheels with their axis parallel to the floor, we decided to use some angle for stability and design purposes. But with some hindsight, we just understood that the omniwheels are just meant to be used completely perpendicular to the floor for some physical properties. When you take a normal wheel, whatever angle you put it on the floor, the only translation you can do is along the line parallel to the floor and perpendicular to the axis of the wheel. Setting the omniwheel with a none right angle messed the previous rule just mentioned.</p>
<p style="text-align: justify;">&nbsp;</p>
<table class="aligncenter" width="760">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/06/OW_v2_01.png"><img class="alignnone size-full wp-image-568" title="OW_v2_01" src="http://www.ludep.com/wp-content/uploads/2011/06/OW_v2_01.png" alt="" width="360" height="388" srcset="https://www.ludep.com/wp-content/uploads/2011/06/OW_v2_01.png 600w, https://www.ludep.com/wp-content/uploads/2011/06/OW_v2_01-278x300.png 278w, https://www.ludep.com/wp-content/uploads/2011/06/OW_v2_01-92x100.png 92w" sizes="(max-width: 360px) 100vw, 360px" /></a></td>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/06/OW_v2_02.png"><img class="alignnone size-full wp-image-569" title="OW_v2_02" src="http://www.ludep.com/wp-content/uploads/2011/06/OW_v2_02.png" alt="" width="360" height="406" srcset="https://www.ludep.com/wp-content/uploads/2011/06/OW_v2_02.png 600w, https://www.ludep.com/wp-content/uploads/2011/06/OW_v2_02-266x300.png 266w, https://www.ludep.com/wp-content/uploads/2011/06/OW_v2_02-88x100.png 88w" sizes="(max-width: 360px) 100vw, 360px" /></a></td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">And this is the reason why we came out with a new design for our ground units that you can see just above. Maybe you just noticed that the omniwheels are different too, and you would be right if you did. We had to change it to because the old design didn&#8217;t allow a perpendicular setup. If you&#8217;re interested in this new design, it&#8217;s one of our own that you can use and we&#8217;re delivering some pictures below if you need a pattern.</p>
<p>&nbsp;</p>
<table class="aligncenter" width="457">
<tbody>
<tr>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/06/ow_01.png"><img class="alignnone size-medium wp-image-576" title="ow_01" src="http://www.ludep.com/wp-content/uploads/2011/06/ow_01-300x273.png" alt="" width="210" height="191" srcset="https://www.ludep.com/wp-content/uploads/2011/06/ow_01-300x273.png 300w, https://www.ludep.com/wp-content/uploads/2011/06/ow_01-100x91.png 100w, https://www.ludep.com/wp-content/uploads/2011/06/ow_01.png 600w" sizes="(max-width: 210px) 100vw, 210px" /></a></td>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/06/ow_02.png"><img class="alignnone size-medium wp-image-577" title="ow_02" src="http://www.ludep.com/wp-content/uploads/2011/06/ow_02-295x300.png" alt="" width="207" height="210" srcset="https://www.ludep.com/wp-content/uploads/2011/06/ow_02-295x300.png 295w, https://www.ludep.com/wp-content/uploads/2011/06/ow_02-98x100.png 98w, https://www.ludep.com/wp-content/uploads/2011/06/ow_02.png 600w" sizes="(max-width: 207px) 100vw, 207px" /></a></td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">Now we&#8217;re working on a new system of movement: acknowledging the robot is located at the point (0;0), he&#8217;s supposed to move to any specific (x;y) position. The system is working according to our expectations but we need to work on the correction to make it more reliable (because we&#8217;re loosing significant accuracy within time and distance). We&#8217;ll try to show some videos with and without corrections on the next post.</p>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Improving the omnidirectional robot design' data-link='https://www.ludep.com/improving-the-omnidirectional-robot-design/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Improving the kiwi drive: tests with a compass sensor</title>
		<link>https://www.ludep.com/improving-the-kiwi-drive-tests-with-a-compass-sensor/</link>
				<pubDate>Tue, 03 May 2011 14:48:51 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Ideas]]></category>
		<category><![CDATA[Issues]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Refining the project]]></category>
		<category><![CDATA[Testing]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=527</guid>
				<description><![CDATA[After hours of testing (or &#8220;playing&#8221;, depends on how you appreciate remote-controlled cars), we&#8217;ve been forced to acknowledge that our omnidirectional robot was not completely accurate: after several movements in random directions, the robot has changed its orientation compared its inner one. The robot is indeed omnidirectional in the way that it can move in [&#8230;] <a href="https://www.ludep.com/improving-the-kiwi-drive-tests-with-a-compass-sensor/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<p style="text-align: justify;">After hours of testing (or &#8220;playing&#8221;, depends on how you appreciate remote-controlled cars), we&#8217;ve been forced to acknowledge that our omnidirectional robot was not completely accurate: after several movements in random directions, the robot has changed its orientation compared its inner one. The robot is indeed omnidirectional in the way that it can move in any direction but we still need to define the &#8220;front&#8221; so as to have a reference when we want it to move in a desired direction.</p>
<p style="text-align: justify;">So this was without a doubt a problem we had to focus on even if  we knew that the robot won&#8217;t ever be 100% accurate over a full experiment. Thus, we came out with the idea of mounting a compass sensor on the robots. This way, we can set a &#8220;reference angle&#8221; for the robot and it will move according to this angle. For instance, if the north is the reference and we want the robot to go towards the north, it will move in the right direction even if it&#8217;s not facing it. The principle is very easy: we&#8217;re taking the angle given by the controller (so 0° if it&#8217;s the north) and when the brick receives the command, it looks what direction it&#8217;s facing and corrects the angle accordingly (so if it was facing the south, it would adjust the angle with +180°).</p>
<p style="text-align: justify;">&nbsp;</p>
<table class="aligncenter" width="890">
<tbody>
<tr>
<td><object width="425" height="349"><param name="movie" value="http://www.youtube.com/v/6s423Kw1CfU?fs=1&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="425" height="349" src="http://www.youtube.com/v/6s423Kw1CfU?fs=1&amp;hl=en_US" allowscriptaccess="always" allowfullscreen="true"></embed></object></td>
<td><object width="425" height="349"><param name="movie" value="http://www.youtube.com/v/bd8369_Bm_Y?fs=1&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="425" height="349" src="http://www.youtube.com/v/bd8369_Bm_Y?fs=1&amp;hl=en_US" allowscriptaccess="always" allowfullscreen="true"></embed></object></td>
</tr>
</tbody>
</table>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">As you can see, we tried different spots for the compass sensor. On the left video, the compass is quite low, very close to the motors and the induced magnetic fields by the motors alter the compass sensor measurements which leads to a poor driving behavior. On the right video, we set up the sensor far from the motors and the robot&#8217;s behavior is way more suitable as you can observe. Nonetheless, we had another problem: the robot has a random behavior in certain spots. Even if the robot is asked to go forward all along the experiment, at one point, it&#8217;s just turning and making a loop on itself.</p>
<p style="text-align: center;">&nbsp;</p>
<p style="text-align: center;"><object width="425" height="349"><param name="movie" value="http://www.youtube.com/v/7Gszz45tS_M?fs=1&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="425" height="349" src="http://www.youtube.com/v/7Gszz45tS_M?fs=1&amp;hl=en_US" allowscriptaccess="always" allowfullscreen="true"></embed></object></p>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">This behavior is due to some magnetic perturbations in the room: we took a compass and checked it everywhere in the room. After sampling every area, we found that the north was actually pointing in other directions in several parts in the room. Thus, our system is handy in the way that no matter which direction the robot is pointing towards, it&#8217;ll go in the direction you input with the controller. Besides, the errors made with the time (the orientation difference) would be totally solved because the orientation wouldn&#8217;t matter any longer with such a system.</p>
<p style="text-align: justify;">But the system would only work in particular areas (with no magnetic fields) and this is something that we have to solve within the next articles. Ideas about accelerometer and gyroscope came out, or trying to use the drone to help the robots, or even implement a PID.</p>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Improving the kiwi drive: tests with a compass sensor' data-link='https://www.ludep.com/improving-the-kiwi-drive-tests-with-a-compass-sensor/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Working out the omnidirectional behavior of the kiwi drive</title>
		<link>https://www.ludep.com/working-out-the-omnidirectional-behavior-of-the-kiwi-drive/</link>
				<pubDate>Wed, 13 Apr 2011 16:06:29 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Refining the project]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=425</guid>
				<description><![CDATA[It&#8217;s been a while we&#8217;ve been working on this omnidirectional robot. We spent a lot of time on the construction (so as to provide a solid and reliable structure), trying to figure out how to move it (just for pure experiments, regardless to the omnidirectional purposes) and now, the last step was to implement the [&#8230;] <a href="https://www.ludep.com/working-out-the-omnidirectional-behavior-of-the-kiwi-drive/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<p style="text-align: justify;">It&#8217;s been a while we&#8217;ve been working on this omnidirectional robot. We spent a lot of time on the construction (so as to provide a solid and reliable structure), trying to figure out how to move it (just for pure experiments, regardless to the omnidirectional purposes) and now, the last step was to implement the kiwi drive ( i.e. <em>how to move the robot in any direction without rotating it</em>). In order to make it easy to understand and picture the movements of the robot, we&#8217;ll refer to the image below.</p>
<p style="text-align: -webkit-auto;">&nbsp;</p>
<div id="attachment_449" class="wp-caption aligncenter" style="width: 648px"><a href="http://www.ludep.com/wp-content/uploads/2011/04/omniwheel_above_axis.png"><img class="size-large wp-image-449 " title="Omnidirectional_bot_above_axis" src="http://www.ludep.com/wp-content/uploads/2011/04/omniwheel_above_axis-1024x903.png" alt="" width="640" height="564" srcset="https://www.ludep.com/wp-content/uploads/2011/04/omniwheel_above_axis-1024x903.png 1024w, https://www.ludep.com/wp-content/uploads/2011/04/omniwheel_above_axis-300x264.png 300w, https://www.ludep.com/wp-content/uploads/2011/04/omniwheel_above_axis-100x88.png 100w" sizes="(max-width: 640px) 100vw, 640px" /></a><p class="wp-caption-text">Omnidirectional robot with axis and conventions</p></div>
<p>&nbsp;</p>
<p style="text-align: justify;">The motor A | B | C is along [OA) | [OB) | [OC) and can move the whole robot according to the black arrow if activated (in the opposite direction if we apply a &#8220;negative&#8221; power) and every motor is at 120° from each other. So this was basically all the information we had about the structure of our robot and we had to implement the kiwi drive with no knowledge about its working. We&#8217;ll explain step by step the way we programmed it.</p>
<p style="text-align: justify;">First, we tried to make the robot go in &#8220;basic&#8221; directions. Indeed, if A gets the power |p| and B gets -|p|, the robot will move along [ON), translating itself. So if we input two opposite powers to two motors, the robot will translate along one of the blue axes. This way, we knew how to go towards six directions in omnidirectional mode using the parameters given in the table below.</p>
<p style="text-align: justify;">&nbsp;</p>
<table class="aligncenter" width="767">
<tbody>
<tr>
<td>
<p><div id="attachment_453" class="wp-caption alignnone" style="width: 265px"><a href="http://www.ludep.com/wp-content/uploads/2011/04/powerMotorsTab.png"><img class="size-full wp-image-453 " title="powerMotorsTab" src="http://www.ludep.com/wp-content/uploads/2011/04/powerMotorsTab.png" alt="" width="257" height="161" srcset="https://www.ludep.com/wp-content/uploads/2011/04/powerMotorsTab.png 257w, https://www.ludep.com/wp-content/uploads/2011/04/powerMotorsTab-100x62.png 100w" sizes="(max-width: 257px) 100vw, 257px" /></a><p class="wp-caption-text">Repartition of the power for the motors according to angle</p></div></td>
<td><a href="http://www.ludep.com/wp-content/uploads/2011/04/powerMotorsDiag.png"><img class="alignnone size-full wp-image-454" title="powerMotorsDiag" src="http://www.ludep.com/wp-content/uploads/2011/04/powerMotorsDiag.png" alt="" width="470" height="209" srcset="https://www.ludep.com/wp-content/uploads/2011/04/powerMotorsDiag.png 470w, https://www.ludep.com/wp-content/uploads/2011/04/powerMotorsDiag-300x133.png 300w, https://www.ludep.com/wp-content/uploads/2011/04/powerMotorsDiag-100x44.png 100w" sizes="(max-width: 470px) 100vw, 470px" /></a></td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">From this point, we wanted to check other values: we started with 30°. Our first strategy was to take the values of 0° and 60° and make the average for every motor. We ended up with 0.5, -1 and 0.5. The result was better than expected because it actually worked&#8230; So we tried to use the same strategy for any angle and thus we applied a linear interpolation (we came out with the diagram above). In order to make it easy to control and to appreciate playing with it (that&#8217;s one of the big advantages when you make a master thesis in robotics), we struggled to implement the XBox 360 Controller in our system and make the control very smooth. We deal directly with the controller in our code, we don&#8217;t use software like XPadder<sup><a href="https://www.ludep.com/working-out-the-omnidirectional-behavior-of-the-kiwi-drive/#footnote_0_425" id="identifier_0_425" class="footnote-link footnote-identifier-link" title="http://www.xpadder.com/">1</a></sup> that we used for instance in another projects; so the control is very light and fast. &#8211;<em>we used the class XBoxController</em><sup><a href="https://www.ludep.com/working-out-the-omnidirectional-behavior-of-the-kiwi-drive/#footnote_1_425" id="identifier_1_425" class="footnote-link footnote-identifier-link" title="everything that you need to run in on Windows is available on this website&nbsp;http://www.aplu.ch/home/apluhomex.jsp?site=36">2</a></sup> <em>instead</em>&#8211;</p>
<p style="text-align: justify;">You can see and enjoy the results on the video below&#8230; (notice that the robot is fully omnidirectional and we used the second joystick in order to make it turn on itself). Nevertheless we&#8217;re still aware that the robot makes some errors, especially at low speed: it makes it turn a bit. We&#8217;re working on a solution right now (trying for the moment to integrate a compass sensor) and we&#8217;re looking forward to lower the number of messages the computer sends to the brick so as not to flood the robot with useless and numerous commands.</p>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: center;"><object width="640" height="510"><param name="movie" value="http://www.youtube.com/v/UG-SqJSIPTE?fs=1&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="640" height="510" src="http://www.youtube.com/v/UG-SqJSIPTE?fs=1&amp;hl=en_US" allowfullscreen="true" allowscriptaccess="always"></embed></object></p>
<p>&nbsp;<br />
<b>References</b></p>
<ol class="footnotes">
<li id="footnote_0_425" class="footnote"><a href="http://www.xpadder.com/">http://www.xpadder.com/</a></li>
<li id="footnote_1_425" class="footnote">everything that you need to run in on Windows is available on this website <a href="http://www.aplu.ch/home/apluhomex.jsp?site=36">http://www.aplu.ch/home/apluhomex.jsp?site=36</a></li>
</ol>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Working out the omnidirectional behavior of the kiwi drive' data-link='https://www.ludep.com/working-out-the-omnidirectional-behavior-of-the-kiwi-drive/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Controlling the LEGO brick via computer: the beginnings of the kiwi drive</title>
		<link>https://www.ludep.com/controlling-the-lego-brick-via-computer-the-beginnings-of-the-kiwi-drive/</link>
				<pubDate>Wed, 06 Apr 2011 14:20:24 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Testing]]></category>

		<guid isPermaLink="false">http://www.ludep.com/?p=363</guid>
				<description><![CDATA[The only tests we&#8217;ve done so far with our omnidirectional robot was using some applications (found the android market) so as control the LEGO brick with the basic LEGO firmware. It was indeed working properly (cf our previous articles and videos) but those softwares weren&#8217;t designed for the kiwi drive1 we want to use in [&#8230;] <a href="https://www.ludep.com/controlling-the-lego-brick-via-computer-the-beginnings-of-the-kiwi-drive/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<p style="text-align: justify;">The only tests we&#8217;ve done so far with our omnidirectional robot was using some applications (found the android market) so as control the LEGO brick with the basic LEGO firmware. It was indeed working properly (<em>cf our previous articles and videos</em>) but those softwares weren&#8217;t designed for the kiwi drive<sup><a href="https://www.ludep.com/controlling-the-lego-brick-via-computer-the-beginnings-of-the-kiwi-drive/#footnote_0_363" id="identifier_0_363" class="footnote-link footnote-identifier-link" title="Omniwheel article on Wikipedia">1</a></sup> we want to use in our project and the firmware (LeJOS) we&#8217;re using on the LEGO bricks. But, before going even deeper in this article, you may want to be told a little bit more about this notion. The kiwi drive (a.k.a. the Killough Platform) is just the structure of a omnidirectional robot with three omniwheels. According to the preferences of the developers, the number of omniwheels are either three or four in the majority of the construction (even if some fanciful but impressive constructions require an unusual number of owmniwheels&#8230;).</p>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">So the first step was to ensure a connection between the brick and the computer via Bluetooth. After that, we enabled the robot and the computer to communicate exchanging strings. The last step of this procedure was to code (on each side) a communication protocol based on string analysis/keywords matching. Thus, you&#8217;ll see on the left video below how easy we can control every motor using simple commands on the computer and some driving test on the right one.</p>
<p style="text-align: center;">&nbsp;</p>
<table class="aligncenter" width="890">
<tbody>
<tr>
<td><object width="425" height="349"><param name="movie" value="http://www.youtube.com/v/inHeYc5AqfM?fs=1&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="425" height="349" src="http://www.youtube.com/v/inHeYc5AqfM?fs=1&amp;hl=en_US" allowfullscreen="true" allowscriptaccess="always"></embed></object></td>
<td><object width="425" height="349"><param name="movie" value="http://www.youtube.com/v/omOZMXOJ3Zc?fs=1&amp;hl=en_US" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="425" height="349" src="http://www.youtube.com/v/omOZMXOJ3Zc?fs=1&amp;hl=en_US" allowfullscreen="true" allowscriptaccess="always"></embed></object></td>
</tr>
<tr>
<th> Testing the motors with command lines</th>
<th> Demo of the driving skills of the robots</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">Nevertheless, the robot doesn&#8217;t have an omnidirectional behavior yet: indeed, we expect the robot to be able to move toward any direction without making any rotation. Our first tests on this feature seem to be promising, but there&#8217;s still a lot of development to do to make it work properly and smoothly. You&#8217;ll be soon informed about the outcome of our experiments&#8230;</p>
<p>&nbsp;<br />
<b>References</b></p>
<ol class="footnotes">
<li id="footnote_0_363" class="footnote"><a title="Kiwi Drive informations" href="http://en.wikipedia.org/wiki/Omni_wheel" target="_blank">Omniwheel article on Wikipedia</a></li>
</ol>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Controlling the LEGO brick via computer: the beginnings of the kiwi drive' data-link='https://www.ludep.com/controlling-the-lego-brick-via-computer-the-beginnings-of-the-kiwi-drive/' data-summary=''></div>]]></content:encoded>
										</item>
		<item>
		<title>Ground unit construction and structure ideas: implementing omniwheels</title>
		<link>https://www.ludep.com/ground-unit-construction-and-structure-ideas-implementing-omniwheels/</link>
				<pubDate>Wed, 30 Mar 2011 13:12:49 +0000</pubDate>
		<dc:creator><![CDATA[Guillaume]]></dc:creator>
				<category><![CDATA[Building]]></category>
		<category><![CDATA[Ground robots]]></category>
		<category><![CDATA[Ideas]]></category>
		<category><![CDATA[Refining the project]]></category>
		<category><![CDATA[Testing]]></category>

		<guid isPermaLink="false">http://ludep.com/?p=239</guid>
				<description><![CDATA[Thinking about the project in itself, we focused on the ground units in the flock and their movements. In order to follow the commands it has been given, a ground unit must turn on itself and then move forward an indicated direction (and eventually make a last rotation to be well oriented with the leader). [&#8230;] <a href="https://www.ludep.com/ground-unit-construction-and-structure-ideas-implementing-omniwheels/" rel="bookmark">more</a>]]></description>
								<content:encoded><![CDATA[<p style="text-align: justify;">Thinking about the project in itself, we focused on the ground units in the flock and their movements. In order to follow the commands it has been given, a ground unit must turn on itself and then move forward an indicated direction (and eventually make a last rotation to be well oriented with the leader). This sequence of three different steps can obviously be executed in one single move; but without considering the obstacle avoidance part, the split way seems to be a reliable first approach. However, we wanted to suppress one of those constraint so as to make the flock units movements much more easier to establish. This way we tried to get rid of the &#8220;rotation&#8221; part in order to gain time: thus we came out with the idea of using omniwheels. It&#8217;s something we already thought about for our last project and agreed that it would be worthy to implement for this one.</p>
<p style="text-align: justify;">Now that you&#8217;re aware of the reasons that led us over here, it&#8217;s maybe about time to tell you some more about the omniwheels (the name in itself can give you clues about its function but as this isn&#8217;t a very common system, we&#8217;ll spend some time on giving explanations). Before giving any theory, a visual contact with the device should give you some hints and satisfy your curiosity.</p>
<p style="text-align: justify;">&nbsp;</p>
<table class="aligncenter" width="900">
<tbody>
<tr>
<td style="vertical-align: middle;"><a href="http://ludep.com/wp-content/uploads/2011/03/holonomicwheel.jpg"><img class="size-medium wp-image-246" title="Omniwheel 2" src="http://ludep.com/wp-content/uploads/2011/03/holonomicwheel-300x266.jpg" alt="" width="300" height="266" srcset="https://www.ludep.com/wp-content/uploads/2011/03/holonomicwheel-300x266.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/holonomicwheel-100x88.jpg 100w, https://www.ludep.com/wp-content/uploads/2011/03/holonomicwheel.jpg 406w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td style="vertical-align: middle;"><a href="http://ludep.com/wp-content/uploads/2011/03/XL_OmniWheel.jpg"><img class="size-medium wp-image-247" title="Omniwheel 3" src="http://ludep.com/wp-content/uploads/2011/03/XL_OmniWheel-300x196.jpg" alt="" width="300" height="196" srcset="https://www.ludep.com/wp-content/uploads/2011/03/XL_OmniWheel-300x196.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/XL_OmniWheel-100x65.jpg 100w, https://www.ludep.com/wp-content/uploads/2011/03/XL_OmniWheel.jpg 500w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td style="vertical-align: middle;"><a href="http://ludep.com/wp-content/uploads/2011/03/IMAG0105.jpg"><img class="size-medium wp-image-248" title="Omniwheel 4" src="http://ludep.com/wp-content/uploads/2011/03/IMAG0105-300x179.jpg" alt="" width="300" height="179" srcset="https://www.ludep.com/wp-content/uploads/2011/03/IMAG0105-300x179.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0105-1024x613.jpg 1024w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0105-100x59.jpg 100w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
</tr>
<tr>
<th>Omniwheel design on <a href="http://www.holonomicwheel.com/">www.holonomicwheel.com</a></th>
<th>TETRIX 3&#8243; Omni Wheel found on <a href="http://www.legoeducation.us/">www.legoeducation.us</a></th>
<th>Excentric design of omniwheel found in the LEGO Lab</th>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">So, as you have noticed, an omniwheel (or polywheel or even holonomic wheel) is a wheel composed of little wheels all around the circumference of the big one. The axis of those little wheels are tangent to the circumference of the big one and they are all included in the same plan (thus, they should all be orthogonal to the axis of the big wheel). This architecture confers &#8220;normal wheel properties&#8221; to the omniwheel but on top of that, the omniwheel can slide along its axis of rotation (or along the projection of this axis on the surface the wheel is used on).</p>
<p style="text-align: justify;">Nevertheless, they are some different architectures according to the creativity of the builders as you can see on the last picture on right above (the axis of the &#8220;little wheels&#8221; are not orthogonal with the axis of the omniwheel). A omniwheel isn&#8217;t omnidirectional in itself but using several of them can turn a robot into a omnidirectional car. And this was the point of our work&#8230;</p>
<p style="text-align: justify;">&nbsp;</p>
<table class="aligncenter" width="900">
<tbody>
<tr>
<td style="vertical-align: middle;"><a href="http://ludep.com/wp-content/uploads/2011/03/IMAG0109.jpg"><img class="alignnone size-medium wp-image-289" title="OW01" src="http://ludep.com/wp-content/uploads/2011/03/IMAG0109-300x179.jpg" alt="" width="300" height="179" srcset="https://www.ludep.com/wp-content/uploads/2011/03/IMAG0109-300x179.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0109-1024x613.jpg 1024w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0109-100x59.jpg 100w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td style="vertical-align: middle;"><a href="http://ludep.com/wp-content/uploads/2011/03/IMAG0110.jpg"><img class="alignnone size-medium wp-image-290" title="OW02" src="http://ludep.com/wp-content/uploads/2011/03/IMAG0110-300x179.jpg" alt="" width="300" height="179" srcset="https://www.ludep.com/wp-content/uploads/2011/03/IMAG0110-300x179.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0110-1024x613.jpg 1024w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0110-100x59.jpg 100w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td style="vertical-align: middle;"><a href="http://ludep.com/wp-content/uploads/2011/03/IMAG0108.jpg"><img class="alignnone size-medium wp-image-291" title="OW03" src="http://ludep.com/wp-content/uploads/2011/03/IMAG0108-300x179.jpg" alt="" width="300" height="179" srcset="https://www.ludep.com/wp-content/uploads/2011/03/IMAG0108-300x179.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0108-1024x613.jpg 1024w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0108-100x59.jpg 100w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
</tr>
</tbody>
</table>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">The omniwheel above is the one we came out with. We only used LEGO pieces, it is composed of 16 little wheels and as you can see the structure isn&#8217;t that massive. After that we tackled the robot construction, knowing that we wanted to use 3 of those omniwheels. The two main problems were to work with the angles so as to respect the LEGO construction conventions (the axis of the omniwheels must cross in one point and their center must describe an equilateral triangle) and have a robust structure for the robot.</p>
<p style="text-align: justify;">&nbsp;</p>
<table class="aligncenter" width="850">
<tbody>
<tr>
<td><object width="425" height="349"><param name="movie" value="http://www.youtube.com/v/Eu1elLqthQE?fs=1&amp;hl=en_US&amp;rel=0" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="425" height="349" src="http://www.youtube.com/v/Eu1elLqthQE?fs=1&amp;hl=en_US&amp;rel=0" allowfullscreen="true" allowscriptaccess="always"></embed></object></td>
<td><object width="425" height="349"><param name="movie" value="http://www.youtube.com/v/1scnbrIT1_A?fs=1&amp;hl=en_US&amp;rel=0" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="425" height="349" src="http://www.youtube.com/v/1scnbrIT1_A?fs=1&amp;hl=en_US&amp;rel=0" allowfullscreen="true" allowscriptaccess="always"></embed></object></td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p style="text-align: justify;">Those two video show how the robot is moving and it was our first tests so from this point, we had to find out what could and should be upgraded. Namely, if you watch closely when the robot stops, it tends to balance and doesn&#8217;t here but could fall in another situations (different speed, different slope, etc). Another notable point is that the robot &#8220;bends itself&#8221; when moving or turning: this is because the fixations and the structure are not strong enough (and this was the most annoying problem). So from this point, we tried to lower the robot and widen the motors so as to provide a better stability; and tried to reinforce the structure without overweighting it (despite of the fact that we can&#8217;t neglect the stability even if it&#8217;s at the expense of the robot&#8217;s weight).</p>
<p style="text-align: justify;">&nbsp;</p>
<table class="aligncenter" width="900">
<tbody>
<tr>
<td><a href="http://ludep.com/wp-content/uploads/2011/03/IMAG0113.jpg"><img class="alignnone size-medium wp-image-310" title="robot_v2_1" src="http://ludep.com/wp-content/uploads/2011/03/IMAG0113-300x179.jpg" alt="" width="300" height="179" srcset="https://www.ludep.com/wp-content/uploads/2011/03/IMAG0113-300x179.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0113-1024x613.jpg 1024w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0113-100x59.jpg 100w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td><a href="http://ludep.com/wp-content/uploads/2011/03/IMAG0114.jpg"><img class="alignnone size-medium wp-image-311" title="robot_v2_2" src="http://ludep.com/wp-content/uploads/2011/03/IMAG0114-300x179.jpg" alt="" width="300" height="179" srcset="https://www.ludep.com/wp-content/uploads/2011/03/IMAG0114-300x179.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0114-1024x613.jpg 1024w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0114-100x59.jpg 100w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td><a href="http://ludep.com/wp-content/uploads/2011/03/IMAG0115.jpg"><img class="alignnone size-medium wp-image-312" title="robot_v2_3" src="http://ludep.com/wp-content/uploads/2011/03/IMAG0115-300x179.jpg" alt="" width="300" height="179" srcset="https://www.ludep.com/wp-content/uploads/2011/03/IMAG0115-300x179.jpg 300w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0115-1024x613.jpg 1024w, https://www.ludep.com/wp-content/uploads/2011/03/IMAG0115-100x59.jpg 100w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
</tr>
</tbody>
</table>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify;">This way, we crafted a new robot much more stable (and quite heavier too) but the balance and the solidity were no longer problems. Something that need to be mentioned is that we inclined the omniwheels instead of installing them perpendicular to the floor (according to our experiments, this difference doesn&#8217;t seem to alter the robot&#8217;s behaviour and movements from any other &#8220;regular omnidirectionnal&#8221; robot).</p>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: center;"><object width="480" height="390"><param name="movie" value="http://www.youtube.com/v/mabJvuV8gbc?fs=1&amp;hl=en_US&amp;rel=0" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="480" height="390" src="http://www.youtube.com/v/mabJvuV8gbc?fs=1&amp;hl=en_US&amp;rel=0" allowscriptaccess="always" allowfullscreen="true"></embed></object></p>
<div class='shareaholic-canvas' data-app-id='17416102' data-app='recommendations' data-title='Ground unit construction and structure ideas: implementing omniwheels' data-link='https://www.ludep.com/ground-unit-construction-and-structure-ideas-implementing-omniwheels/' data-summary=''></div>]]></content:encoded>
										</item>
	</channel>
</rss>
